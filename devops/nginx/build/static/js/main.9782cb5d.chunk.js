(this.webpackJsonpmoretech=this.webpackJsonpmoretech||[]).push([[0],{102:function(e,t,a){e.exports={container:"sourceView_container__4OKeh",title:"sourceView_title__3_-hO",info:"sourceView_info__oYue0",table:"sourceView_table__3ZpUF"}},137:function(e,t,a){e.exports={authBtn:"styles_authBtn__1AHhq",icon:"styles_icon__2xJLZ",auth:"styles_auth__2tl_r"}},151:function(e,t,a){e.exports={container:"styles_container__ZxVFh"}},157:function(e,t,a){e.exports={container:"loader_container__2zY8R",textWrapper:"loader_textWrapper__g_UiL"}},159:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},25:function(e,t,a){e.exports={main:"main_main__2vSgt",search:"main_search__ebLrH",sortBtn:"main_sortBtn__1MJN_",detailBtn:"main_detailBtn__2DQv3",mainSearchResults:"main_mainSearchResults__1VIMP",date:"main_date__1BY07",tdAction:"main_tdAction__3VCOr",tdSettings:"main_tdSettings__Ne3Tn",footer:"main_footer__1jBbJ",circle:"main_circle__33gXc",searchPanel:"main_searchPanel__qfNO8",filters:"main_filters__32Fhk",checkbox:"main_checkbox__PJEBq",isMy:"main_isMy__edvm0",settingsContainer:"main_settingsContainer__GtLkx",input:"main_input__2Io5q",button:"main_button__2xxOQ"}},27:function(e,t,a){e.exports={container:"targetView_container__245Eb",title:"targetView_title__1JhrC",info:"targetView_info__1DGkx",table:"targetView_table__1UFSQ",targetControls:"targetView_targetControls__2dPkW",rightPartBlock:"targetView_rightPartBlock__73BC8",select:"targetView_select__Ufc-y",img:"targetView_img__2Xi3E",marginTop:"targetView_marginTop__14coX",popup:"targetView_popup__mbzVP",closePopup:"targetView_closePopup__1RALC",selectFilterOp:"targetView_selectFilterOp__3kBVi",operation:"targetView_operation__35t2x",bool:"targetView_bool__JhwKn",emptyContainer:"targetView_emptyContainer__1OuvW",addTransfrom:"targetView_addTransfrom__3WiNW",addFilter:"targetView_addFilter__QI_Qg",contentOutline:"targetView_contentOutline__1mxEl"}},29:function(e,t,a){e.exports={main:"details_main__2BGZA",defaultBtn:"details_defaultBtn__wB_50",firstBtn:"details_firstBtn__3izYF",secondBtn:"details_secondBtn__1B3Rt",saveBtn:"details_saveBtn__gOzgT",addBtn:"details_addBtn__3ceAr",modalBtn:"details_modalBtn__2oLpH",modalTitle:"details_modalTitle__2p8CU",mainSearchResults:"details_mainSearchResults__17UJ7",container:"details_container__3FDxx",descriptionBlock:"details_descriptionBlock__2ujsg",title:"details_title__1pT3M",owner:"details_owner__3rMmG",description:"details_description__1lkdv",addNewBlock:"details_addNewBlock__1o6N7",addNew:"details_addNew__3rBcx",select:"details_select__3BSAn",error:"details_error__27Dzq"}},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(34),i=a.n(r),s=(a(212),a(213),a(214),a(42)),o=a(30),l={auth:"/auth",index:"/",main:"/main",profile:"/profile",myDatasets:"/my_datasets",details:"/details/:id",constructor:"/constructor/:urn/:id",feature:"/feature/new",test:"/test"},d=a(78),u=a(21),j=a.n(u),p=a(32),b=a(7),m=a(22),O=a(25),f=a.n(O),h=a.p+"static/media/privateClose.ec8a7da0.svg",x=a.p+"static/media/privateOpen.e2c19907.svg",v=a.p+"static/media/settings.4a643a14.svg",_=a.p+"static/media/link_arrow.70af71f8.svg",g=a.p+"static/media/filter.c80a986f.svg",y=(a(159),a(326)),k=a(99),N=a(325),w=a(94),T=a.n(w),C=a(79),S=a(189),B=a.n(S),I=a(324),D=function(){var e=B.a.create();return e.defaults.baseURL="".concat(String(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_HOST||window.location.origin),"/back/api/"),e.defaults.headers.get.Accept="application/json",e.interceptors.request.use((function(e){return Object(b.a)(Object(b.a)({},e),{},{headers:Object(b.a)({},e.headers)})})),e.interceptors.response.use((function(e){return e}),(function(e){var t;return null===(t=e.response)||void 0===t||t.status,I.a.UNAUTHORIZED,e.response})),e},F={sourceFromApi:function(e,t){var a={};return a.id=t,a.name=e.name,a.owner=e.owner&&"".concat(e.owner.first_name," ").concat(e.owner.last_name),a.price=e.price,a.description=e.description,a.isPurchased=e.is_purchased,a.isMine=e.is_mine,a.fields=[],e.meta_data&&e.meta_data.length&&(a.fields=e.meta_data.map((function(e){return{id:e.id,dataType:e.data_type,name:e.field_name,desc:e.description,isFiltered:!1}}))),a},featureToApi:function(e){var t={};return t.name=e.steps[e.steps.length-1].name||e.source.name,t.source=e.source.id,t.steps=e.steps.map((function(t){var a={type:t.type,name:t.name,fields:t.fields.map((function(t){return{name:t.name,source_id:e.source.id,operations:t.operation,constant:t.value,delimiter:t.delimiter,fields:t.refs}}))};return"filter"===t.type&&(a.fields=t.fields.filter((function(e){return e.isFiltered})).map((function(e){return{id:e.id,type:e.operation,refType:"value",ref:e.value}}))),a})),{name:t.name,description:t.source,json_field:t}},metadataToApi:function(e){return{field_name:e.name,description:e.desc,data_type:e.dataType,data_set:e.data_set}}},A=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),e.next=3,a.get("datasets/"+t+"/",{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 3:if(!(n=e.sent).data||n.status!==I.a.OK){e.next=6;break}return e.abrupt("return",F.sourceFromApi(n.data,t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),e.next=3,a.get("schemas/"+t+"/",{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 3:if(!(n=e.sent).data||n.status!==I.a.OK){e.next=6;break}return e.abrupt("return",n.data.json_field);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),n=t.search||t.is_mine||t.is_purchased?{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}}:void 0,e.prev=2,e.next=5,a.get("datasets?name=".concat(t.name||"","&is_mine=").concat(t.is_mine||"","&is_purchased=").concat(t.is_purchased||""),n);case 5:if((r=e.sent).status===I.a.UNAUTHORIZED&&localStorage.removeItem("token"),!(null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.results)){e.next=9;break}return e.abrupt("return",r.data.results);case 9:return e.abrupt("return",null);case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),e.next=3,a.post("datasets/"+t+"/purchase/","",{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 3:if(!(n=e.sent).data||n.status!==I.a.OK){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),e.next=3,a.post("metadata/",F.metadataToApi(t),{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 3:if(!(n=e.sent).data||n.status!==I.a.OK){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),e.next=3,a.post("datasets/",t,{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 3:if(!(n=e.sent).data||n.status!==I.a.CREATED){e.next=8;break}return console.log(t.fields),t.fields&&t.fields.map((function(e){return z(Object(b.a)(Object(b.a)({},e),{},{data_set:n.data.id}))})),e.abrupt("return",n.data);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D(),e.next=3,t.get("datatypes/","",{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 3:if(!(a=e.sent).data||a.status!==I.a.OK){e.next=6;break}return e.abrupt("return",a.data);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(),n=F.featureToApi(t),c=JSON.stringify(n),e.next=5,a.post("schemas/",c,{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 5:if(!(r=e.sent).data||r.status!==I.a.OK){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D(),e.prev=1,e.next=4,t.get("schemas/",{headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}});case 4:if((n=e.sent).status===I.a.UNAUTHORIZED&&localStorage.removeItem("token"),!(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.results)){e.next=8;break}return e.abrupt("return",n.data.results);case 8:return e.abrupt("return",null);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.owner={},a=D(),n={headers:{Authorization:"Token ".concat(localStorage.getItem("token")||"")}},e.prev=3,e.next=6,a.put("datasets/"+t.id+"/",t,n);case 6:return e.sent.status===I.a.UNAUTHORIZED&&localStorage.removeItem("token"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),J=a(82),L=a.n(J),K=a(151),H=a.n(K),W=a(60),Z=a(3),G=function(){return Object(Z.jsx)("div",{className:H.a.container,children:Object(Z.jsx)("div",{className:H.a.loader,children:Object(Z.jsx)(W.a,{})})})},Q=c.a.memo(G),X=a(4),$=a.n(X),ee=a(128),te=a(327),ae=a(330),ne=function(e){var t=e.setSettings,a=e.settingsData,c=e.isOpenSettings,r=e.setIsOpenSettings,i=(Object(ee.a)(e,["setSettings","settingsData","isOpenSettings","setIsOpenSettings"]),Object(n.useState)(Object(b.a)({},a))),s=Object(m.a)(i,2),o=s[0],l=s[1],u=function(e){if("boolean"===typeof e)l(Object(b.a)(Object(b.a)({},o),{},{is_private:e}));else{var t=e.target,a=t.name,n=t.value;l(Object(b.a)(Object(b.a)({},o),{},Object(d.a)({},a,n)))}};return Object(n.useEffect)((function(){l(a)}),[a]),Object(Z.jsx)(te.a,{visible:c,onCancel:function(){return r(!1)},children:Object(Z.jsxs)("div",{className:f.a.settingsContainer,children:[Object(Z.jsxs)("div",{children:[Object(Z.jsx)("span",{children:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439"}),Object(Z.jsx)(ae.a,{value:null===o||void 0===o?void 0:o.is_private,onChange:u})]}),Object(Z.jsxs)("div",{className:f.a.input,children:[Object(Z.jsx)("span",{children:"\u0426\u0435\u043d\u0430"}),Object(Z.jsx)(y.a,{name:"price",value:null===o||void 0===o?void 0:o.price,onChange:u})]}),Object(Z.jsx)("button",{className:f.a.button,onClick:function(){r(!1),t(o)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]})})},ce=y.a.Search,re={search:"",is_mine:null,is_purchased:null},ie=function(){var e=Object(o.h)().pathname===l.myDatasets,t=Object(n.useState)(Object(b.a)({},re)),a=Object(m.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(null),s=Object(m.a)(i,2),u=s[0],O=s[1],y=Object(n.useState)([]),w=Object(m.a)(y,2),S=w[0],B=w[1],I=Object(n.useState)(!1),D=Object(m.a)(I,2),F=D[0],A=D[1],P=Object(n.useState)(!1),V=Object(m.a)(P,2),z=V[0],M=V[1],R=Object(o.g)(),q=!!localStorage.getItem("token"),U=Object(n.useState)(null),J=Object(m.a)(U,2),K=J[0],H=J[1],W=Object(n.useState)(!1),G=Object(m.a)(W,2),X=G[0],ee=G[1];L()(Object(p.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A(!0),!e){t.next=7;break}return t.next=4,E(Object(b.a)(Object(b.a)({},c),{},{is_mine:!0}));case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,E(c);case 9:t.t0=t.sent;case 10:a=t.t0,B(a||[]),A(!1);case 13:case"end":return t.stop()}}),t)}))),[c]);var te=[{title:"",dataIndex:"isChecked",key:"isChecked",width:"30px",render:function(e){if(e)return Object(Z.jsx)("div",{className:f.a.circle})}},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",width:"200px",render:function(e,t){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("div",{children:e}),Object(Z.jsx)("p",{className:f.a.date,children:T()(t.updated_at).format("DD.MM.YYYY hh:mm")})]})}},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description",key:"description"},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",key:"price",render:function(e){return Object(Z.jsx)("div",{children:e||"Free"})}},{title:"",dataIndex:"id",className:f.a.tdAction,key:"action",render:function(e){return Object(Z.jsxs)("div",{onClick:function(){return R.push(Object(C.reverse)(l.details,{id:e}))},className:f.a.detailBtn,children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e ",Object(Z.jsx)("img",{alt:"->",src:_})]})}}],ae=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",render:function(e,t){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("div",{children:e}),Object(Z.jsx)("p",{className:f.a.date,children:T()(t.updated_at).format("DD.MM.YYYY hh:mm")})]})}},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description",key:"description"},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",key:"price",render:function(e){return Object(Z.jsx)("div",{children:e||"Free"})}},{title:"",dataIndex:"id",key:"",render:function(e){return Object(Z.jsxs)("div",{onClick:function(){return R.push(Object(C.reverse)(l.details,{id:e}))},className:f.a.detailBtn,children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e ",Object(Z.jsx)("img",{alt:"->",src:_})]})}},{title:"",dataIndex:"is_private",key:"is_private",width:"20px",className:f.a.tdAction,render:function(e){return console.log(e),Object(Z.jsx)("img",{alt:"isPrivate",src:e?x:h})}},{title:"",dataIndex:"settings",className:f.a.tdAction,key:"name",width:"20px",render:function(e,t){return Object(Z.jsx)("img",{onClick:function(){var e=S.filter((function(e){return t.id===e.id}));H(e[0]),ee(!0)},className:f.a.tdSettings,alt:"isPrivate",src:v})}}],ie=function(){var e=Object(p.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(Object(b.a)({},t)),e.next=3,Y(t);case 3:e.sent&&B(S.map((function(e){return e.id===t.id?Object(b.a)({},t):e})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e){var t=e.target,a=t.name,n=t.value;r(Object(b.a)(Object(b.a)({},c),{},Object(d.a)({},a,!n)))};return Object(Z.jsxs)("div",{className:f.a.main,children:[Object(Z.jsx)("h1",{children:e?"\u041c\u043e\u0438 \u0414\u0430\u0442\u0430\u0441\u0435\u0442\u044b":"\u0414\u0430\u0442\u0430\u0441\u0435\u0442\u044b"}),Object(Z.jsxs)("div",{className:f.a.searchPanel,children:[Object(Z.jsx)(ce,{className:f.a.search,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e, \u0442\u0438\u043a\u0435\u0440\u0443",onChange:function(e){(e.target.value.length>2||!e.target.value.length)&&r(Object(b.a)(Object(b.a)({},c),{},{name:e.target.value}))}}),!e&&q&&Object(Z.jsxs)("button",{onClick:function(){z&&r(Object(b.a)(Object(b.a)({},c),{},{is_mine:null,is_purchased:null})),M(!z)},children:[Object(Z.jsx)("img",{alt:"-",src:g}),Object(Z.jsx)("span",{children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"})]})]}),z&&Object(Z.jsxs)("div",{className:f.a.filters,children:[Object(Z.jsxs)("p",{className:f.a.checkbox,children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u043e\u0438 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u044b ",Object(Z.jsx)(k.a,{value:c.is_mine,name:"is_mine",onChange:se})]}),Object(Z.jsxs)("p",{className:f.a.checkbox,children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u0443\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u044b ",Object(Z.jsx)(k.a,{value:c.is_purchased,name:"is_purchased",onChange:se})]})]}),e&&Object(Z.jsx)(ne,{setSettings:ie,settingsData:K,isOpenSettings:X,setIsOpenSettings:ee}),Object(Z.jsxs)("div",{className:f.a.mainSearchResults,children:[!F&&Object(Z.jsx)(N.a,{className:$()(Object(d.a)({},f.a.isMy,e)),pagination:!1,onRow:function(t,a){return{index:a,onClick:function(t){e||function(e){var t=S.map((function(t,a){return a===e&&O({id:t.id,price:t.price}),Object(b.a)(Object(b.a)({},t),{},{isChecked:a===e})}));B(t)}(a)}}},locale:{emptyText:"\u0414\u0430\u0442\u0430\u0441\u0435\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"},dataSource:S,columns:e?ae:te}),F&&Object(Z.jsx)(Q,{})]}),Object(Z.jsxs)("div",{className:f.a.footer,children:[q&&!e&&Object(Z.jsx)("button",{disabled:!(null===u||void 0===u?void 0:u.id)||!(null===u||void 0===u?void 0:u.price),onClick:function(){return R.push("/constructor/".concat(u.id))},children:"\u041a\u0443\u043f\u0438\u0442\u044c"}),q&&e&&Object(Z.jsx)("button",{onClick:function(){},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),q&&e&&Object(Z.jsx)("button",{onClick:function(){return R.push("/details/new")},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),!e&&q&&Object(Z.jsx)("button",{disabled:!(null===u||void 0===u?void 0:u.id),onClick:function(){return R.push("/constructor/".concat(u.id,"/new"))},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u0447\u0443"})]})]})},se=a(57),oe=a.n(se),le=a(196),de=a(157),ue=a.n(de),je=function(e){var t=e.statusText,a=Object(n.useState)(""),c=Object(m.a)(a,2),r=c[0],i=c[1];return Object(n.useEffect)((function(){var e=setInterval((function(){i((function(e){return e.length<3?e+".":""}))}),300);return function(){clearInterval(e)}}),[]),Object(Z.jsxs)("div",{className:ue.a.container,children:[Object(Z.jsx)(le.a,{}),t&&Object(Z.jsxs)("div",{className:ue.a.textWrapper,children:[Object(Z.jsx)("div",{children:t}),Object(Z.jsx)("div",{children:r})]})]})},pe=a(102),be=a.n(pe),me=function(e){var t=e.data;if(!t)return Object(Z.jsx)(je,{statusText:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"});return Object(Z.jsxs)("div",{className:be.a.container,children:[Object(Z.jsx)("div",{className:be.a.title,children:"\u0411\u043b\u043e\u043a \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430"}),Object(Z.jsx)("div",{className:be.a.info,children:t.name||"-"}),Object(Z.jsx)("div",{children:Object(Z.jsxs)("table",{className:be.a.table,children:[Object(Z.jsx)("thead",{children:Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:Object(Z.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})}),Object(Z.jsx)("th",{children:Object(Z.jsx)("span",{children:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445"})})]})}),Object(Z.jsx)("tbody",{children:t.fields.map((function(e,t){return Object(Z.jsxs)("tr",{draggable:!0,onDragStart:function(t){!function(e,t){e.dataTransfer.setData("text",JSON.stringify(t))}(t,e)},children:[Object(Z.jsx)("td",{children:Object(Z.jsx)("span",{children:e.name})}),Object(Z.jsx)("td",{children:Object(Z.jsx)("span",{children:e.dataType})})]},t)}))})]})})]})},Oe=a(27),fe=a.n(Oe),he=a(98),xe=a(127),ve=a(331),_e=a(39),ge=a.p+"static/media/icon_round_plus.b5d7bb3c.svg",ye=a.p+"static/media/close_popup_icon.095d0b32.svg",ke=a(329),Ne=he.a.Option,we={boxShadow:"4px 4px 23px 6px rgba(55, 151, 245, 0.40)"},Te={opacity:.6},Ce=function(e){e.preventDefault()},Se={empty:{id:"empty",name:"-",targetType:"str_type"},"string-concat":{id:"string-concat",name:"\u0441\u0446\u0435\u043f\u0438\u0442\u044c",targetType:"str_type"},"date-year":{id:"date-year",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0433\u043e\u0434",targetType:"int_type"},"date-month":{id:"date-month",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043c\u0435\u0441\u044f\u0446",targetType:"int_str"},"date-weekday":{id:"date-weekday",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438",targetType:"str_type"},"date-day":{id:"date-day",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0447\u0438\u0441\u043b\u043e",targetType:"int_type"},"date-iso":{id:"date-iso",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c ISO timestamp",targetType:"str_type"},"datetime-year":{id:"datetime-year",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0433\u043e\u0434",targetType:"int_type"},"datetime-month":{id:"datetime-month",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043c\u0435\u0441\u044f\u0446",targetType:"int_type"},"datetime-weekday":{id:"datetime-weekday",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438",targetType:"int_type"},"datetime-day":{id:"datetime-day",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0447\u0438\u0441\u043b\u043e",targetType:"int_type"},"datetime-iso":{id:"datetime-iso",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c ISO timestamp",targetType:"int_type"},"datetime-hour":{id:"datetime-hour",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0447\u0430\u0441\u044b",targetType:"int_type"},"datetime-minute":{id:"datetime-minute",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043c\u0438\u043d\u0443\u0442\u044b",targetType:"int_type"},"datetime-second":{id:"datetime-second",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0441\u0435\u043a\u0443\u043d\u0434\u044b",targetType:"int_type"},"datetime-timezone":{id:"datetime-timezone",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u043f\u043e\u044f\u0441",targetType:"int_type"},"datetime-utc":{id:"datetime-utc",name:"\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432 UTC",targetType:"str_type"},"int-sum":{id:"int-sum",name:"\u0441\u043b\u043e\u0436\u0438\u0442\u044c",targetType:"int_type"},"int-subtract":{id:"int-subtract",name:"\u0432\u044b\u0447\u0435\u0441\u0442\u044c",targetType:"int_type"},"int-multiply":{id:"int-multiply",name:"\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c",targetType:"int_type"},"int-divide":{id:"int-divide",name:"\u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c",targetType:"int_type"},"int-to-string":{id:"int-to-string",name:"\u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0441\u0442\u0440\u043e\u043a\u0443",targetType:"str_type"},"float-sum":{id:"float-sum",name:"\u0441\u043b\u043e\u0436\u0438\u0442\u044c",targetType:"float_type"},"float-subtract":{id:"float-subtract",name:"\u0432\u044b\u0447\u0435\u0441\u0442\u044c",targetType:"float_type"},"float-multiply":{id:"float-multiply",name:"\u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c",targetType:"float_type"},"float-divide":{id:"float-divide",name:"\u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c",targetType:"float_type"},"float-to-string":{id:"float-to-string",name:"\u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0441\u0442\u0440\u043e\u043a\u0443",targetType:"str_type"}},Be={int_type:[{id:"empty",name:"-"},{id:"int-equal",name:"\u0440\u0430\u0432\u043d\u043e"},{id:"int-greater-or-equal",name:"\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"int-smaller-or-equal",name:"\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"int-greater",name:"\u0431\u043e\u043b\u044c\u0448\u0435"},{id:"int-smaller",name:"\u043c\u0435\u043d\u044c\u0448\u0435"}],float_type:[{id:"empty",name:"-"},{id:"float-equal",name:"\u0440\u0430\u0432\u043d\u043e"},{id:"float-greater-or-equal",name:"\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"float-smaller-or-equal",name:"\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"float-greater",name:"\u0431\u043e\u043b\u044c\u0448\u0435"},{id:"float-smaller",name:"\u043c\u0435\u043d\u044c\u0448\u0435"}],date_type:[{id:"empty",name:"-"},{id:"date-equal",name:"\u0440\u0430\u0432\u043d\u043e"},{id:"date-greater-or-equal",name:"\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"date-smaller-or-equal",name:"\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"date-greater",name:"\u0431\u043e\u043b\u044c\u0448\u0435"},{id:"date-smaller",name:"\u043c\u0435\u043d\u044c\u0448\u0435"}],datetime_type:[{id:"empty",name:"-"},{id:"datetime-equal",name:"\u0440\u0430\u0432\u043d\u043e"},{id:"datetime-greater-or-equal",name:"\u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"datetime-smaller-or-equal",name:"\u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e"},{id:"datetime-greater",name:"\u0431\u043e\u043b\u044c\u0448\u0435"},{id:"datetime-smaller",name:"\u043c\u0435\u043d\u044c\u0448\u0435"}],str_type:[{id:"empty",name:"-"},{id:"string-equal",name:"\u0440\u0430\u0432\u043d\u043e"},{id:"string-contains",name:"\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442"},{id:"string-not-contains",name:"\u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442"}],bool_type:[{id:"empty",name:"-"},{id:"boolean-equal",name:"\u0440\u0430\u0432\u043d\u043e"}]},Ie=function(e){switch(e){case"str_type":return[Se["string-concat"],Se.empty];case"date_type":return[Se["date-year"],Se["date-month"],Se["date-weekday"],Se["date-day"],Se["date-iso"],Se.empty];case"datetime_type":return[Se["datetime-year"],Se["datetime-month"],Se["datetime-weekday"],Se["datetime-day"],Se["datetime-iso"],Se["datetime-hour"],Se["datetime-minute"],Se["datetime-second"],Se["datetime-timezone"],Se["datetime-utc"],Se.empty];case"int_type":return[Se["int-sum"],Se["int-subtract"],Se["int-multiply"],Se["int-divide"],Se["int-to-string"],Se.empty];case"float_type":return[Se["float-sum"],Se["float-subtract"],Se["float-multiply"],Se["float-divide"],Se["float-to-string"],Se.empty];default:return[Se.empty]}},De=function(e){var t=e.data,a=e.sourceData,c=e.addField,r=e.addStep,i=e.updateName,s=e.updateField,o=Object(n.useState)(!1),l=Object(m.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(0),p=Object(m.a)(j,2),O=p[0],f=p[1],h=Object(n.useState)(!1),x=Object(m.a)(h,2),v=x[0],_=x[1],k=Object(n.useState)(0),N=Object(m.a)(k,2),w=N[0],T=N[1],C=Object(n.useState)(!1),S=Object(m.a)(C,2),B=S[0],I=S[1],D=Object(n.useState)(0),F=Object(m.a)(D,2),A=F[0],P=F[1],E=Object(n.useCallback)((function(e){i(e.target.value,t.id)}),[t]);return t?Object(Z.jsxs)("div",{className:fe.a.container,style:B?we:{},onDragEnter:function(e){0===A&&I(!0),P(A+1)},onDragLeave:function(e){1===A&&I(!1),P(A-1)},onDrop:function(e){e.preventDefault();var t=null;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(a){console.error(a)}c({id:Object(ke.a)(),sourceField:t.id,sourceType:t.dataType,dataType:t.dataType,name:t.name,desc:t.desc,isOpen:!1,operation:"empty",value:"",delimiter:"",refs:[]})},onDragOver:Ce,children:[Object(Z.jsxs)("div",{className:fe.a.title,children:["\u0411\u043b\u043e\u043a \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430",Object(Z.jsxs)("span",{children:["(","filter"===t.type?"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f":"\u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435",")"]})]}),Object(Z.jsx)("div",{className:fe.a.info,children:Object(Z.jsx)(y.a,{value:t.name,onChange:E,size:"default",type:"text",placeholder:"\u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430"})}),Object(Z.jsxs)("div",{children:["filter"===t.type&&Object(Z.jsxs)("table",{className:fe.a.table,children:[Object(Z.jsx)("thead",{children:Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:Object(Z.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})}),Object(Z.jsx)("th",{children:Object(Z.jsx)("span",{children:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445"})})]})}),Object(Z.jsx)("tbody",{children:t&&t.fields.map((function(e,t){return Object(Z.jsxs)("tr",{style:e.isFiltered?{}:{display:"none"},children:[Object(Z.jsx)("td",{children:Object(Z.jsxs)("div",{className:fe.a.targetControls,children:[Object(Z.jsx)("span",{children:e.name}),Object(Z.jsx)("div",{className:fe.a.rightPartBlock,children:Object(Z.jsx)(ve.a,{visible:e.isOpen,placement:"left",content:Object(Z.jsxs)("div",{className:fe.a.popup,children:[Object(Z.jsxs)("label",{children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f",Object(Z.jsx)(y.a,{value:e.name,onChange:function(t){s(Object(b.a)(Object(b.a)({},e),{},{name:t.target.value}))}})]}),"bool_type"!==e.dataType&&Object(Z.jsxs)("label",{className:fe.a.operation,children:["\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f",Object(Z.jsx)(he.a,{className:fe.a.selectFilterOp,value:e.operation,size:"small",onSelect:function(t){s(Object(b.a)(Object(b.a)({},e),{},{operation:t}))},children:Be[e.dataType].map((function(e){return Object(Z.jsx)(Ne,{value:e.id,children:e.name},e.id)}))})]}),"bool_type"!==e.dataType&&Object(Z.jsxs)("label",{className:fe.a.operation,children:["\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435",Object(Z.jsx)(y.a,{value:e.value,onChange:function(t){s(Object(b.a)(Object(b.a)({},e),{},{value:t.target.value}))}})]}),"bool_type"===e.dataType&&Object(Z.jsxs)("label",{className:fe.a.bool,children:[Object(Z.jsx)("span",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(Z.jsxs)(xe.a.Group,{onChange:function(t){s(Object(b.a)(Object(b.a)({},e),{},{value:t.target.value}))},children:[Object(Z.jsx)(xe.a,{value:!0,children:"\u0414\u0430"}),Object(Z.jsx)(xe.a,{value:!1,children:"\u041d\u0435\u0442"})]})]}),Object(Z.jsx)("img",{src:ye,className:fe.a.closePopup,onClick:function(){s(Object(b.a)(Object(b.a)({},e),{},{isOpen:!1}))}})]}),children:Object(Z.jsx)("img",{className:fe.a.img,src:g,onClick:function(){s(Object(b.a)(Object(b.a)({},e),{},{isOpen:!0}))}})})})]})}),Object(Z.jsx)("td",{children:Object(Z.jsx)("span",{children:e.dataType})})]},t)}))})]}),"transform"===t.type&&Object(Z.jsxs)("table",{className:fe.a.table,children:[Object(Z.jsx)("thead",{children:Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("th",{children:Object(Z.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})}),Object(Z.jsx)("th",{children:Object(Z.jsx)("span",{children:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445"})})]})}),Object(Z.jsx)("tbody",{children:t&&t.fields.map((function(e,a){return Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("td",{children:Object(Z.jsxs)("div",{className:fe.a.targetControls,children:[Object(Z.jsx)("span",{children:e.name}),Object(Z.jsxs)("div",{className:fe.a.rightPartBlock,children:[Object(Z.jsx)(he.a,{className:fe.a.select,value:e.operation,size:"small",onSelect:function(t){s(Object(b.a)(Object(b.a)({},e),{},{operation:t,dataType:"empty"===t?e.sourceType:Se[t].targetType}))},children:Ie(e.sourceType).map((function(e){return Object(Z.jsx)(Ne,{value:e.id,children:e.name},e.id)}))}),Object(Z.jsx)(ve.a,{visible:e.isOpen,placement:"left",content:function(){if("filter"!==t.type)return"empty"===e.operation?Object(Z.jsxs)("div",{className:fe.a.popup,children:[Object(Z.jsx)("label",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f"}),Object(Z.jsx)("img",{src:ye,className:fe.a.closePopup,onClick:function(){s(Object(b.a)(Object(b.a)({},e),{},{isOpen:!1}))}})]}):Object(Z.jsxs)("div",{className:fe.a.popup,children:[Object(Z.jsxs)("label",{children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f",Object(Z.jsx)(y.a,{value:e.name,onChange:function(t){s(Object(b.a)(Object(b.a)({},e),{},{name:t.target.value}))}})]}),["string-concat"].indexOf(e.operation)>=0&&Object(Z.jsxs)("label",{children:["\u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c",Object(Z.jsx)(y.a,{value:e.delimiter,onChange:function(t){s(Object(b.a)(Object(b.a)({},e),{},{delimiter:t.target.value}))}})]}),["int-sum","int-subtract","int-multiply","int-divide","float-sum","float-subtract","float-multiply","float-divide"].indexOf(e.operation)>=0&&Object(Z.jsxs)("label",{children:["\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0430",Object(Z.jsx)(y.a,{value:e.value,onChange:function(t){s(Object(b.a)(Object(b.a)({},e),{},{value:t.target.value}))}})]}),["string-concat","int-sum","int-subtract","int-multiply","int-divide","float-sum","float-subtract","float-multiply","float-divide"].indexOf(e.operation)>=0&&e.refs.map((function(a,n){return Object(Z.jsx)(he.a,{className:fe.a.marginTop,value:a,onChange:function(t){var a=e.refs;e.refs.indexOf(t)>=0&&s(Object(b.a)({},e)),a[n]=t,s(Object(b.a)(Object(b.a)({},e),{},{refs:a}))},children:t.prevTarget.fields.map((function(t,n){if(t.dataType===e.dataType&&!(e.sourceField===t.id||e.refs.indexOf(t.id)>=0&&t.id!==a))return Object(Z.jsx)(Ne,{value:t.id,children:t.name},n)}))},n)})),["string-concat","int-sum","int-subtract","int-multiply","int-divide","float-sum","float-subtract","float-multiply","float-divide"].indexOf(e.operation)>=0&&Object(Z.jsx)(_e.a,{className:fe.a.marginTop,size:"small",onClick:function(){e.refs.push(""),s(Object(b.a)(Object(b.a)({},e),{},{refs:e.refs}))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u0435"}),Object(Z.jsx)("img",{src:ye,className:fe.a.closePopup,onClick:function(){s(Object(b.a)(Object(b.a)({},e),{},{isOpen:!1}))}})]})}(),children:Object(Z.jsx)("img",{className:fe.a.img,src:g,onClick:function(){s(Object(b.a)(Object(b.a)({},e),{},{isOpen:!0}))}})})]})]})}),Object(Z.jsx)("td",{children:Object(Z.jsx)("span",{children:e.dataType})})]},a)}))})]})]})]}):Object(Z.jsxs)("div",{className:fe.a.emptyContainer,children:[Object(Z.jsx)("div",{className:fe.a.addTransfrom,children:Object(Z.jsxs)("div",{className:fe.a.contentOutline,style:v?we:{},onDragEnter:function(e){0===w&&_(!0),T(w+1)},onDragLeave:function(e){1===w&&_(!1),T(w-1)},onDrop:function(e){e.preventDefault();var t=null;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(n){console.error(n)}r("transform",a,t)},onDragOver:Ce,children:[Object(Z.jsx)("div",{style:v?Te:{},children:"\u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Z.jsx)("img",{src:ge})]})}),Object(Z.jsx)("div",{className:fe.a.addFilter,children:Object(Z.jsxs)("div",{className:fe.a.contentOutline,style:d?we:{},onDragEnter:function(e){0===O&&u(!0),f(O+1)},onDragLeave:function(e){1===O&&u(!1),f(O-1)},onDrop:function(e){e.preventDefault();var t=null;try{t=JSON.parse(e.dataTransfer.getData("text"))}catch(n){console.error(n)}r("filter",a,t)},onDragOver:Ce,children:[Object(Z.jsx)("div",{style:d?Te:{},children:"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(Z.jsx)("img",{src:ge})]})})]})},Fe=a(199),Ae=a(69),Pe=a.n(Ae),Ee={source:null,steps:[],currentStep:0},Ve=function(){var e=Object(o.i)(),t=e.urn,a=e.id,c=Object(n.useState)(Ee),r=Object(m.a)(c,2),i=r[0],s=r[1],l=Object(n.useState)(!1),d=Object(m.a)(l,2),u=d[0],j=d[1];Object(n.useEffect)((function(){switch(a){case"new":break;default:P(a).then((function(e){s((function(t){var a=Pe()(t);return a.steps=e.steps,a}))}))}}),[a]);var p=Object(n.useCallback)((function(e){s((function(t){var a=Pe()(t),n=a.steps[a.currentStep];if(!n.hasChild){n.hasChild=!0;var c={id:Object(ke.a)(),type:e,name:"",hasChild:!1,prevTarget:n,fields:[]};return"filter"===e&&(c.fields=n.fields.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{isFiltered:!1})}))),a.steps.push(c),a}}))}),[]),O=Object(n.useCallback)((function(e,t,a){s((function(n){var c=Pe()(n),r={id:Object(ke.a)(),type:e,name:"",hasChild:!1,prevTarget:t,fields:[]};return r.fields.push({id:Object(ke.a)(),sourceField:a.id,sourceType:a.dataType,dataType:a.dataType,name:a.name,desc:a.desc,isOpen:!1,operation:"empty",value:"",delimiter:"",refs:[]}),"filter"===e&&(r.fields=t.fields.map((function(e){return e.id===a.id&&(e.isFiltered=!0),e}))),c.steps.push(r),c}))}),[]),f=Object(n.useCallback)((function(e){s((function(t){var a=Pe()(t),n=a.steps[a.currentStep];if(n)return"filter"===n.type?(n.fields=n.fields.map((function(t){return t.id===e.sourceField&&(t.isFiltered=!0),t})),a):(n.fields.find((function(t){return t.sourceField===e.sourceField}))||n.fields.push(e),a);console.error("Cant find target with id ",a.currentStep)}))})),h=Object(n.useCallback)((function(e){s((function(t){var a=Pe()(t),n=a.steps[a.currentStep];if(n)return n.fields=n.fields.map((function(t){return t.id===e.id?e:t})),a;console.error("Cant find target with id ",a.currentStep)}))}),[]),x=Object(n.useCallback)((function(e,t){s((function(t){var a=Pe()(t),n=a.steps[a.currentStep];if(n)return n.name=e,a;console.error("Cant find target with id ",a.currentStep)}))}),[]);return Object(n.useEffect)((function(){A(t).then((function(e){s((function(t){return Object(b.a)(Object(b.a)({},t),{},{source:e})}))}))}),[t]),u?Object(Z.jsx)("div",{className:oe.a.wrapper,children:Object(Z.jsx)(je,{statusText:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435"})}):(console.log(i),Object(Z.jsxs)("div",{className:oe.a.wrapper,children:[Object(Z.jsx)("div",{className:oe.a.sourceContainer,children:Object(Z.jsx)(me,{data:i.steps.length>0&&i.steps[i.currentStep].prevTarget||i.source})}),Object(Z.jsx)("div",{className:oe.a.targetContainer,children:Object(Z.jsx)(De,{data:i.steps[i.currentStep],sourceData:i.source,addField:f,addStep:O,updateField:h,updateName:x})}),i.steps.length>0&&Object(Z.jsxs)("div",{className:oe.a.pagination,children:[Object(Z.jsx)(Fe.a,{current:i.currentStep+1,pageSize:1,total:i.steps.length,onChange:function(e){console.log("page ",e),s((function(t){var a=Pe()(t);return a.currentStep=e-1,a}))}}),!i.steps[i.currentStep].hasChild&&Object(Z.jsx)(_e.a,{className:oe.a.create,onClick:function(){p("transform")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}),!i.steps[i.currentStep].hasChild&&Object(Z.jsx)(_e.a,{className:oe.a.create,onClick:function(){p("filter")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e"})]}),Object(Z.jsx)("div",{className:oe.a.saveBtn,children:Object(Z.jsx)(_e.a,{className:oe.a.saveBtnText,onClick:function(){var e=Pe()(i);j(!0),q(e).then((function(e){j(!1)}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}))},ze=a(328),Me=a.p+"static/media/avatar.1a160393.svg",Re=a.p+"static/media/error.84ea648d.svg",qe=a(29),Ue=a.n(qe),Ye=(a(319),ze.a.Panel),Je=he.a.Option,Le={description:"",price:0,fields:[]},Ke=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f",dataIndex:"name",key:"name",width:"240px"},{title:"\u0422\u0438\u043f \u0434\u0430\u043d\u043d\u044b\u0445",dataIndex:"dataType",key:"dataType",width:"200px",render:function(e){return Object(Z.jsx)("span",{children:(null===e||void 0===e?void 0:e.split("_")[0])||""})}},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"desc",key:"desc",width:"840px"}],He=function(){var e,t=Object(o.i)().id,a=Object(o.g)(),c=Object(n.useState)(Le),r=Object(m.a)(c,2),i=r[0],s=r[1],d=Object(n.useState)([]),u=Object(m.a)(d,2),O=u[0],f=u[1],h=Object(n.useState)(Le.fields),x=Object(m.a)(h,2),v=x[0],_=x[1],g=Object(n.useState)(!1),k=Object(m.a)(g,2),w=k[0],T=k[1],S=Object(n.useState)(!1),B=Object(m.a)(S,2),I=B[0],D=B[1],F=Object(n.useState)(!1),P=Object(m.a)(F,2),E=P[0],z=P[1];L()(Object(p.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),"new"===t){e.next=8;break}return e.next=4,A(t);case 4:(n=e.sent)?(s(n||{}),_((null===n||void 0===n?void 0:n.fields)||[])):a.push(l.main),e.next=12;break;case 8:return e.next=10,R(t);case 10:c=e.sent,f(c);case 12:T(!1);case 13:case"end":return e.stop()}}),e)}))),[t]);var q=function(){var e=Object(p.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:a=e.sent,s(Object(b.a)(Object(b.a)({},i),{},{isPurchased:"Done!"===a})),z("Not enough money!"===a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.name){e.next=4;break}D("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430"),e.next=14;break;case 4:if(!isNaN(i.price)){e.next=8;break}D('\u041f\u043e\u043b\u0435 "\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c.'),e.next=14;break;case 8:return e.next=10,M(i);case 10:t=e.sent,D(""),n=null===t||void 0===t?void 0:t.id,a.push(Object(C.reverse)(l.details,{id:n}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:Ue.a.container,children:[Object(Z.jsxs)("div",{className:Ue.a.main,children:[Object(Z.jsx)("h1",{children:"new"===t?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430":"\u0414\u0435\u0442\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"}),!w&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("div",{className:Ue.a.descriptionBlock,children:[Object(Z.jsx)("img",{src:Me}),"new"===t?Object(Z.jsxs)("div",{className:Ue.a.addNew,children:[Object(Z.jsx)(y.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u0430",value:i.fields.name,onChange:function(e){return s(Object(b.a)(Object(b.a)({},i),{},{name:e.target.value}))}}),Object(Z.jsx)(y.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(e){return s(Object(b.a)(Object(b.a)({},i),{},{price:e.target.value}))}}),Object(Z.jsx)("div",{className:Ue.a.description,children:Object(Z.jsx)(y.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:i.fields.description,onChange:function(e){return s(Object(b.a)(Object(b.a)({},i),{},{description:e.target.value}))}})})]}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("p",{className:Ue.a.title,children:i.name}),Object(Z.jsxs)("div",{className:Ue.a.owner,children:[Object(Z.jsx)("p",{children:"\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446"}),Object(Z.jsx)("p",{children:i.owner})]}),Object(Z.jsxs)("div",{children:[Object(Z.jsx)("p",{children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(Z.jsx)("p",{children:i.price?i.price:"free"})]}),Object(Z.jsxs)("div",{className:Ue.a.description,children:[Object(Z.jsx)("p",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Z.jsx)("p",{children:i.description})]})]}),w&&Object(Z.jsx)(Q,{})]}),Object(Z.jsx)("div",{className:Ue.a.error,children:I}),"new"!==t&&!i.isPurchased&&!i.isMine&&Object(Z.jsxs)(Z.Fragment,{children:[!!i.price&&Object(Z.jsx)("button",{className:Ue.a.firstBtn,onClick:q,children:"\u041a\u0443\u043f\u0438\u0442\u044c"}),Object(Z.jsx)("button",{className:Ue.a.defaultBtn,onClick:function(){return a.push("/constructor/".concat(t,"/new"))},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),(i.isPurchased||i.isMine)&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("button",{className:Ue.a.defaultBtn,onClick:function(){return a.push("/constructor/".concat(t,"/new"))},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"}),Object(Z.jsx)("button",{className:Ue.a.secondBtn,onClick:function(){return a.goBack()},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"})]})]})]}),Object(Z.jsxs)("div",{className:Ue.a.main,children:["new"===t&&Object(Z.jsxs)("div",{className:Ue.a.addNewBlock,children:[Object(Z.jsx)(y.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f",value:v.name,onChange:function(e){return _(Object(b.a)(Object(b.a)({},v),{},{name:e.target.value}))}}),Object(Z.jsx)(he.a,{className:Ue.a.select,size:"small",value:v.dataType,onSelect:function(e){return _(Object(b.a)(Object(b.a)({},v),{},{dataType:e}))},children:O.map((function(e){return Object(Z.jsx)(Je,{value:e,children:e.split("_")[0]},e)}))}),Object(Z.jsx)(y.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f",value:v.desc,onChange:function(e){return _(Object(b.a)(Object(b.a)({},v),{},{desc:e.target.value}))}}),Object(Z.jsx)("button",{className:Ue.a.addBtn,onClick:function(){var e,t=(null===i||void 0===i||null===(e=i.fields)||void 0===e?void 0:e.slice())||[];t.push(v),s(Object(b.a)(Object(b.a)({},i),{},{fields:t})),_([])},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(Z.jsx)(ze.a,{defaultActiveKey:"1",children:Object(Z.jsx)(Ye,{header:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",children:Object(Z.jsx)("div",{className:Ue.a.mainSearchResults,children:Object(Z.jsx)(N.a,{rowKey:null===i||void 0===i||null===(e=i.fields)||void 0===e?void 0:e.name,pagination:!1,locale:{emptyText:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"},dataSource:i.fields,columns:Ke})})},"1")})]}),"new"===t&&Object(Z.jsx)("button",{className:Ue.a.saveBtn,onClick:U,okText:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0447\u0451\u0442",cancelText:"\u041e\u0442\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Z.jsxs)(te.a,{visible:E,onCancel:function(){return z(!1)},children:[Object(Z.jsxs)("div",{className:Ue.a.modalTitle,children:[Object(Z.jsx)("img",{src:Re}),Object(Z.jsx)("h2",{children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0434\u043b\u044f \u043e\u043f\u043b\u0430\u0442\u044b"})]}),Object(Z.jsxs)("div",{className:Ue.a.modalBtn,children:[Object(Z.jsx)("button",{className:Ue.a.firstBtn,onClick:function(){return z(!1)},children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0447\u0451\u0442"}),Object(Z.jsx)("button",{className:Ue.a.defaultBtn,onClick:function(){return z(!1)},children:"\u041e\u0442\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f"})]})]})]})},We=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(m.a)(r,2),s=i[0],d=i[1],u=Object(o.g)();L()(Object(p.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,U();case 3:t=e.sent,c(t||[]),d(!1);case 6:case"end":return e.stop()}}),e)}))),[]);var b=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",key:"name",width:"200px",render:function(e,t){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("div",{children:e}),Object(Z.jsx)("p",{className:f.a.date,children:T()(t.updated_at).format("DD.MM.YYYY hh:mm")})]})}},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description",key:"description"},{title:"",dataIndex:"description",className:f.a.tdAction,key:"description",render:function(e,t){return Object(Z.jsxs)("div",{onClick:function(){return u.push(Object(C.reverse)(l.constructor,{id:t.id,urn:t.description}))},className:f.a.detailBtn,children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e ",Object(Z.jsx)("img",{alt:"->",src:_})]})}},{title:"",dataIndex:"id",className:f.a.tdAction,key:"id",render:function(e,t){return Object(Z.jsx)("div",{onClick:function(){return window.location.href="http://ec2-18-219-12-230.us-east-2.compute.amazonaws.com/back/api/schemas/".concat(t.id,"/download")},className:f.a.detailBtn,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"})}}];return Object(Z.jsxs)("div",{className:f.a.main,children:[Object(Z.jsx)("h1",{children:"\u041c\u043e\u0438 \u0444\u0438\u0447\u0438"}),Object(Z.jsxs)("div",{className:f.a.mainSearchResults,children:[!s&&Object(Z.jsx)(N.a,{pagination:!1,locale:{emptyText:"\u0424\u0438\u0447\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"},dataSource:a,columns:b}),s&&Object(Z.jsx)(Q,{})]})]})},Ze={index:{path:l.index,component:function(){return Object(Z.jsx)(o.a,{to:l.main})}},constructor:{path:l.constructor,component:function(){return Object(Z.jsx)(Ve,{})}},feature:{path:l.feature,component:function(){return Object(Z.jsx)(We,{})}},main:{path:[l.main,l.myDatasets],component:function(){return Object(Z.jsx)(ie,{})}},details:{path:l.details,component:function(){return Object(Z.jsx)(He,{})}}},Ge=a(58),Qe=a.n(Ge),Xe=a.p+"static/media/logo.da8320c0.svg",$e=a(137),et=a.n($e),tt=a.p+"static/media/google.0299b897.svg",at=(a(320),function(e){return Object(Z.jsx)(te.a,{visible:e.isModalAuthOpen,onCancel:function(){return e.setIsModalAuthOpen(!1)},children:Object(Z.jsxs)("div",{className:et.a.auth,children:[Object(Z.jsx)("p",{children:"\u0412\u0445\u043e\u0434"}),Object(Z.jsxs)("button",{className:et.a.authBtn,onClick:function(){var t=Object(ke.a)();localStorage.setItem("token",t),window.location.href="http://ec2-18-219-12-230.us-east-2.compute.amazonaws.com/back/core/login?token=".concat(t),e.setIsModalAuthOpen(!1),e.setIsToken(!0)},children:[Object(Z.jsx)("img",{className:et.a.icon,src:tt,alt:"icon"}),Object(Z.jsx)("span",{children:"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Google"})]})]})})}),nt=function(e){var t=Object(n.useState)(!!localStorage.getItem("token")),a=Object(m.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!1),d=Object(m.a)(i,2),u=d[0],j=d[1],p=Object(o.g)();return Object(Z.jsxs)("div",{className:Qe.a.appContainer,children:[Object(Z.jsxs)("div",{className:Qe.a.header,children:[Object(Z.jsxs)("div",{className:Qe.a.leftNav,children:[Object(Z.jsx)("img",{onClick:function(){return p.push(l.index)},src:Xe,alt:"logo-vtb"}),Object(Z.jsxs)("nav",{className:Qe.a.nav,children:[Object(Z.jsx)(s.b,{activeClassName:Qe.a.active,to:l.main,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),c&&Object(Z.jsx)(s.b,{activeClassName:Qe.a.active,to:l.feature,children:"\u041c\u043e\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u044b"}),c&&Object(Z.jsx)(s.b,{activeClassName:Qe.a.active,to:l.myDatasets,children:"\u041c\u043e\u0438 \u0434\u0430\u0442\u0430\u0441\u0435\u0442\u044b"})]})]}),Object(Z.jsx)("div",{className:Qe.a.rightNav,onClick:function(){c?(localStorage.removeItem("token"),r(!1)):j(!0)},children:c?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"})]}),Object(Z.jsxs)("div",{className:Qe.a.contentContainer,children:[u&&Object(Z.jsx)(at,{setIsToken:r,setIsModalAuthOpen:j,isModalAuthOpen:u}),e.children]})]})},ct=function(e){var t=e.component,a=(e.location,Object(ee.a)(e,["component","location"])),c=Object(n.useCallback)((function(e){return Object(Z.jsx)(t,Object(b.a)({},e))}),[]);return Object(Z.jsx)(nt,{children:Object(Z.jsx)(o.b,Object(b.a)(Object(b.a)({exact:!0},a),{},{component:c}))})},rt=Object.values(Ze);var it=function(){return Object(Z.jsx)(s.a,{children:Object(Z.jsx)(o.d,{children:rt.map((function(e){return Object(Z.jsx)(ct,{exact:!0,path:e.path,component:e.component},e.path)}))})})},st=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,332)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(Z.jsx)(c.a.StrictMode,{children:Object(Z.jsx)(it,{})}),document.getElementById("root")),st()},57:function(e,t,a){e.exports={wrapper:"constructor_wrapper__2Ev32",sourceContainer:"constructor_sourceContainer__1lSPo",targetContainer:"constructor_targetContainer__3mDIu",pagination:"constructor_pagination__1vFZU",create:"constructor_create__24n_x",saveBtn:"constructor_saveBtn__2S3PZ",saveBtnText:"constructor_saveBtnText__7E9Op"}},58:function(e,t,a){e.exports={header:"styles_header___egRr",rightNav:"styles_rightNav__3mEEH",leftNav:"styles_leftNav__34Lrf",nav:"styles_nav__3bIJb",active:"styles_active__2MBpI",contentContainer:"styles_contentContainer__20cp_",appContainer:"styles_appContainer__iUHdK"}}},[[321,1,2]]]);
//# sourceMappingURL=main.9782cb5d.chunk.js.map