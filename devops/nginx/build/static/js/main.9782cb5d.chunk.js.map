{"version":3,"sources":["pages/constructor/sourceView/sourceView.module.scss","pages/login/styles.module.scss","pages/loader/styles.module.scss","components/loader/loader.module.scss","pages/main/main.module.scss","pages/constructor/targetView/targetView.module.scss","pages/details/details.module.scss","pages/paths.js","assets/icons/privateClose.svg","assets/icons/privateOpen.svg","assets/icons/settings.svg","assets/icons/link_arrow.svg","assets/icons/filter.svg","services/_api.js","models/dataset.js","services/dataset.js","pages/loader/index.jsx","pages/main/modal.js","pages/main/main.jsx","components/loader/index.js","components/loader/loader.jsx","pages/constructor/sourceView/index.js","pages/constructor/sourceView/sourceView.jsx","assets/icons/icon_round_plus.svg","assets/icons/close_popup_icon.svg","pages/constructor/targetView/targetView.jsx","pages/constructor/targetView/index.js","pages/constructor/constructor.jsx","assets/icons/avatar.svg","assets/icons/error.svg","pages/details/details.jsx","pages/details/index.js","pages/feature/feature.js","routes.jsx","assets/icons/logo.svg","assets/icons/google.svg","pages/login/index.js","pages/login/login.jsx","pages/layouts/defaultLayout.js","pages/privateRoute.jsx","App.jsx","reportWebVitals.js","index.jsx","pages/constructor/constructor.module.scss","pages/layouts/styles.module.scss"],"names":["module","exports","paths","auth","index","main","profile","myDatasets","details","constructor","feature","test","getApiInstance","apiInstance","axios","create","defaults","baseURL","String","process","REACT_APP_API_HOST","window","location","origin","headers","get","Accept","interceptors","request","use","config","response","error","status","StatusCodes","UNAUTHORIZED","DatasetModel","sourceFromApi","rawData","id","result","name","owner","first_name","last_name","price","description","isPurchased","is_purchased","isMine","is_mine","fields","meta_data","length","map","item","dataType","data_type","field_name","desc","isFiltered","featureToApi","steps","source","newItem","type","field","source_id","operations","operation","constant","value","delimiter","refs","filter","pos","refType","ref","json_field","metadataToApi","data_set","fetchDataset","a","apiService","localStorage","getItem","data","OK","fetchSchema","getDataSets","params","search","undefined","res","removeItem","results","console","log","purchaseDataset","post","createMetadata","createDataset","CREATED","fetchDataTypes","fetchPostFeature","payload","json","JSON","stringify","getFeature","updateDataset","put","Loader","className","styles","container","loader","LoadingOutlined","React","memo","ModalSettings","setSettings","settingsData","isOpenSettings","setIsOpenSettings","useState","setData","onChange","e","is_private","target","useEffect","visible","onCancel","settingsContainer","input","button","onClick","Search","Input","defaultParams","MainPage","isMy","useLocation","pathname","requestParams","setRequestParams","choseItem","setChoseItem","loading","setLoading","showFilters","setShowFilters","history","useHistory","isToken","setSettingsData","useAsyncEffect","columns","title","dataIndex","key","width","render","isChecked","circle","date","moment","updated_at","format","tdAction","push","reverse","detailBtn","alt","src","Arrow","columnMy","Open","Close","selectData","elem","tdSettings","Settings","updateData","setFilters","searchPanel","placeholder","Filter","filters","checkbox","mainSearchResults","classNames","pagination","onRow","record","newData","i","onRowClickHandler","locale","emptyText","dataSource","footer","disabled","statusText","setStatus","setInterval","currentValue","clearInterval","textWrapper","SourceView","info","table","draggable","onDragStart","dataTransfer","handleDragStart","Option","Select","overBoxStyle","boxShadow","overTextStyle","opacity","onDragOver","preventDefault","targetType","filterOptions","getSelectOptions","TargetView","sourceData","addField","addStep","updateName","updateField","overFilter","setOverFilter","overFilterCou","setOverFilterCou","overTransform","setOverTransform","overTransformCou","setOverTransformCou","overBlock","setOverBlock","overBlockCou","setOverBlockCou","handleNameChange","useCallback","style","onDragEnter","onDragLeave","onDrop","parse","getData","err","uuidv4","sourceField","sourceType","isOpen","size","display","targetControls","rightPartBlock","placement","content","popup","selectFilterOp","onSelect","bool","Group","closeIcon","closePopup","img","settingIcon","select","indexOf","marginTop","newValue","prevTarget","opt","j","getPopupContent","emptyContainer","addTransfrom","contentOutline","icon","addFilter","initialData","currentStep","ConstructorPage","useParams","urn","isSaving","setIsSaving","then","jsonResp","currentData","cloneDeep","currentTarget","hasChild","addStepWithField","prev","newField","find","newName","targetId","datasetData","wrapper","sourceContainer","targetContainer","current","pageSize","total","page","saveBtn","saveBtnText","dataToSend","Panel","Collapse","defaultData","split","DetailsPage","types","setTypes","setNewData","setError","isModalVisible","setIsModalVisible","purchase","isNaN","descriptionBlock","Avatar","addNew","firstBtn","defaultBtn","secondBtn","goBack","addNewBlock","addBtn","tmp","slice","defaultActiveKey","header","rowKey","okText","cancelText","modalTitle","Error","modalBtn","Feature","href","routes","path","component","to","LoginPage","props","isModalAuthOpen","setIsModalAuthOpen","authBtn","uuid","setItem","setIsToken","GoogleIcon","DefaultLayout","appContainer","leftNav","Logo","nav","activeClassName","active","rightNav","contentContainer","children","PrivateRoute","PrivateComponent","rest","renderedComponent","prop","exact","privateRoutesList","Object","values","App","route","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9782cb5d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"sourceView_container__4OKeh\",\"title\":\"sourceView_title__3_-hO\",\"info\":\"sourceView_info__oYue0\",\"table\":\"sourceView_table__3ZpUF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authBtn\":\"styles_authBtn__1AHhq\",\"icon\":\"styles_icon__2xJLZ\",\"auth\":\"styles_auth__2tl_r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__ZxVFh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"loader_container__2zY8R\",\"textWrapper\":\"loader_textWrapper__g_UiL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__2vSgt\",\"search\":\"main_search__ebLrH\",\"sortBtn\":\"main_sortBtn__1MJN_\",\"detailBtn\":\"main_detailBtn__2DQv3\",\"mainSearchResults\":\"main_mainSearchResults__1VIMP\",\"date\":\"main_date__1BY07\",\"tdAction\":\"main_tdAction__3VCOr\",\"tdSettings\":\"main_tdSettings__Ne3Tn\",\"footer\":\"main_footer__1jBbJ\",\"circle\":\"main_circle__33gXc\",\"searchPanel\":\"main_searchPanel__qfNO8\",\"filters\":\"main_filters__32Fhk\",\"checkbox\":\"main_checkbox__PJEBq\",\"isMy\":\"main_isMy__edvm0\",\"settingsContainer\":\"main_settingsContainer__GtLkx\",\"input\":\"main_input__2Io5q\",\"button\":\"main_button__2xxOQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"targetView_container__245Eb\",\"title\":\"targetView_title__1JhrC\",\"info\":\"targetView_info__1DGkx\",\"table\":\"targetView_table__1UFSQ\",\"targetControls\":\"targetView_targetControls__2dPkW\",\"rightPartBlock\":\"targetView_rightPartBlock__73BC8\",\"select\":\"targetView_select__Ufc-y\",\"img\":\"targetView_img__2Xi3E\",\"marginTop\":\"targetView_marginTop__14coX\",\"popup\":\"targetView_popup__mbzVP\",\"closePopup\":\"targetView_closePopup__1RALC\",\"selectFilterOp\":\"targetView_selectFilterOp__3kBVi\",\"operation\":\"targetView_operation__35t2x\",\"bool\":\"targetView_bool__JhwKn\",\"emptyContainer\":\"targetView_emptyContainer__1OuvW\",\"addTransfrom\":\"targetView_addTransfrom__3WiNW\",\"addFilter\":\"targetView_addFilter__QI_Qg\",\"contentOutline\":\"targetView_contentOutline__1mxEl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"details_main__2BGZA\",\"defaultBtn\":\"details_defaultBtn__wB_50\",\"firstBtn\":\"details_firstBtn__3izYF\",\"secondBtn\":\"details_secondBtn__1B3Rt\",\"saveBtn\":\"details_saveBtn__gOzgT\",\"addBtn\":\"details_addBtn__3ceAr\",\"modalBtn\":\"details_modalBtn__2oLpH\",\"modalTitle\":\"details_modalTitle__2p8CU\",\"mainSearchResults\":\"details_mainSearchResults__17UJ7\",\"container\":\"details_container__3FDxx\",\"descriptionBlock\":\"details_descriptionBlock__2ujsg\",\"title\":\"details_title__1pT3M\",\"owner\":\"details_owner__3rMmG\",\"description\":\"details_description__1lkdv\",\"addNewBlock\":\"details_addNewBlock__1o6N7\",\"addNew\":\"details_addNew__3rBcx\",\"select\":\"details_select__3BSAn\",\"error\":\"details_error__27Dzq\"};","const paths = {\n\tauth: '/auth',\n\tindex: '/',\n\tmain: '/main',\n\tprofile: '/profile',\n\tmyDatasets: '/my_datasets',\n\tdetails: '/details/:id',\n\tconstructor: '/constructor/:urn/:id',\n\tfeature: '/feature/new',\n\ttest: '/test',\n};\n\nexport default paths;\n","export default __webpack_public_path__ + \"static/media/privateClose.ec8a7da0.svg\";","export default __webpack_public_path__ + \"static/media/privateOpen.e2c19907.svg\";","export default __webpack_public_path__ + \"static/media/settings.4a643a14.svg\";","export default __webpack_public_path__ + \"static/media/link_arrow.70af71f8.svg\";","export default __webpack_public_path__ + \"static/media/filter.c80a986f.svg\";","import axios from \"axios\";\nimport { StatusCodes } from 'http-status-codes';\n\nexport const getApiInstance = () => {\n\tconst apiInstance = axios.create();\n\tapiInstance.defaults.baseURL = `${String(process.env.REACT_APP_API_HOST || window.location.origin)}/back/api/`;\n\tapiInstance.defaults.headers.get.Accept = 'application/json';\n\n\tapiInstance.interceptors.request.use((config) => ({\n\t\t...config,\n\t\theaders: {\n\t\t\t...config.headers,\n\t\t},\n\t}));\n\n\tapiInstance.interceptors.response.use(\n\t\t(response) => {\n\t\t\treturn response;\n\t\t},\n\t\t(error) => {\n\t\t\tif (error.response?.status === StatusCodes.UNAUTHORIZED) {\n\t\t\t\t// do something\n\t\t\t}\n\t\t\treturn error.response;\n\t\t});\n\treturn apiInstance;\n}\n","const DatasetModel = {\n\tsourceFromApi: (rawData, id) => {\n\t\tconst result = {};\n\t\tresult.id = id;\n\t\tresult.name = rawData.name;\n\t\tresult.owner = rawData.owner && `${rawData.owner.first_name} ${rawData.owner.last_name}`;\n\t\tresult.price = rawData.price;\n\t\tresult.description = rawData.description;\n\t\tresult.isPurchased = rawData.is_purchased;\n\t\tresult.isMine = rawData.is_mine;\n\t\tresult.fields = [];\n\t\tif (rawData.meta_data && rawData.meta_data.length) {\n\t\t\tresult.fields = rawData.meta_data.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tdataType: item.data_type,\n\t\t\t\t\tname: item.field_name,\n\t\t\t\t\tdesc: item.description,\n\t\t\t\t\tisFiltered: false\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\treturn result;\n\t},\n\tfeatureToApi: (rawData) => {\n\t\tconst result = {};\n\t\tresult.name = rawData.steps[rawData.steps.length - 1].name || rawData.source.name;\n\t\tresult.source = rawData.source.id;\n\t\tresult.steps = rawData.steps.map((item) => {\n\t\t\tconst newItem = {\n\t\t\t\ttype: item.type,\n\t\t\t\tname: item.name,\n\t\t\t\tfields: item.fields.map((field) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: field.name,\n\t\t\t\t\t\tsource_id: rawData.source.id,\n\t\t\t\t\t\toperations: field.operation,\n\t\t\t\t\t\tconstant: field.value,\n\t\t\t\t\t\tdelimiter: field.delimiter,\n\t\t\t\t\t\tfields: field.refs\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t};\n\t\t\tif (item.type === 'filter') {\n\t\t\t\tnewItem.fields = item.fields.filter((pos) => {\n\t\t\t\t\treturn pos.isFiltered;\n\t\t\t\t}).map((pos) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: pos.id,\n\t\t\t\t\t\ttype: pos.operation,\n\t\t\t\t\t\trefType: 'value',\n\t\t\t\t\t\tref: pos.value\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn newItem;\n\t\t});\n\t\treturn {\n\t\t\tname: result.name,\n\t\t\tdescription: result.source,\n\t\t\tjson_field: result\n\t\t};\n\t},\n\tmetadataToApi: (rawData) => {\n\t\treturn {\n\t\t\tfield_name: rawData.name,\n\t\t\tdescription: rawData.desc,\n\t\t\tdata_type: rawData.dataType,\n\t\t\tdata_set: rawData.data_set,\n\t\t};\n\t},\n};\n\nexport default DatasetModel;","import { getApiInstance } from \"./_api\";\nimport {StatusCodes} from \"http-status-codes\";\nimport DatasetModel from \"../models/dataset\";\n\nexport const fetchDataset = async (id) => {\n\tconst apiService = getApiInstance();\n\tconst response = await apiService.get('datasets/' + id + '/', {\n\t\theaders: {\n\t\t\t'Authorization': `Token ${localStorage.getItem('token') || ''}`\n\t\t}\n\t});\n\tif (response.data && response.status === StatusCodes.OK) {\n\t\treturn DatasetModel.sourceFromApi(response.data, id);\n\t}\n};\n\nexport const fetchSchema = async(id) => {\n\tconst apiService = getApiInstance();\n\tconst response = await apiService.get('schemas/' + id + '/', {\n\t\theaders: {\n\t\t\t'Authorization': `Token ${localStorage.getItem('token') || ''}`\n\t\t}\n\t});\n\tif (response.data && response.status === StatusCodes.OK) {\n\t\treturn response.data.json_field;\n\t}\n}\n\nexport const getDataSets = async (params) => {\n  const apiService = getApiInstance();\n  const config = (params.search || params.is_mine || params.is_purchased) ? { headers: {\n      'Authorization': `Token ${localStorage.getItem('token') || ''}`\n    }} : undefined;\n\n  try {\n    const res = await apiService.get(`datasets?name=${params.name || ''}&is_mine=${params.is_mine || ''}&is_purchased=${params.is_purchased || ''}`,config );\n if( res.status === StatusCodes.UNAUTHORIZED) {\n   localStorage.removeItem('token');\n }\n    if (res?.data?.results)\n      return res.data.results;\n\t\treturn null;\n  }\n  catch (error) {\n    console.log(error);\n    return null;\n  }\n}\n\nexport const purchaseDataset = async (id) => {\n\tconst apiService = getApiInstance();\n\tconst response = await apiService.post('datasets/' + id + '/purchase/', '', { headers: {\n    'Authorization': `Token ${localStorage.getItem('token') || ''}`\n  }});\n\tif (response.data && response.status === StatusCodes.OK) {\n\t\treturn response.data;\n\t}\n  return false;\n};\n\nexport const createMetadata = async (data) => {\n\tconst apiService = getApiInstance();\n\tconst response = await apiService.post('metadata/', DatasetModel.metadataToApi(data), { headers: {\n    'Authorization': `Token ${localStorage.getItem('token') || ''}`\n  }});\n\tif (response.data && response.status === StatusCodes.OK) {\n\t\treturn response.data;\n\t}\n  return false;\n};\n\nexport const createDataset = async (data) => {\n\tconst apiService = getApiInstance();\n\tconst response = await apiService.post('datasets/', data, {\n    headers: { 'Authorization': `Token ${localStorage.getItem('token') || ''}`},\n  });\n\tif (response.data && response.status === StatusCodes.CREATED) {\n    console.log(data.fields);\n    if (data.fields) {\n      data.fields.map((item) => createMetadata({ ...item, data_set: response.data.id }));\n    }\n\t\treturn response.data;\n\t}\n  return false;\n};\n\nexport const fetchDataTypes = async () => {\n\tconst apiService = getApiInstance();\n\tconst response = await apiService.get('datatypes/', '', { headers: {\n    'Authorization': `Token ${localStorage.getItem('token') || ''}`\n  }});\n\tif (response.data && response.status === StatusCodes.OK) {\n\t\treturn response.data;\n\t}\n  return false;\n};\nexport const fetchPostFeature = async (rawData) => {\n\tconst apiService = getApiInstance();\n\tconst payload = DatasetModel.featureToApi(rawData);\n\tconst json = JSON.stringify(payload);\n\tconst response = await apiService.post('schemas/', json, {\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Authorization': `Token ${localStorage.getItem('token') || ''}`\n\t\t}\n\t});\n\tif(response.data && response.status === StatusCodes.OK) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const getFeature = async () => {\n  const apiService = getApiInstance();\n  try {\n    const response = await apiService.get('schemas/', {\n      headers: {\n        'Authorization': `Token ${localStorage.getItem('token') || ''}`\n      }\n    });\n    if (response.status === StatusCodes.UNAUTHORIZED) {\n      localStorage.removeItem('token');\n    }\n    if (response?.data?.results)\n      return response.data.results;\n    return null;\n  }\n  catch (error){\n    console.log(error);\n  }\n}\n\nexport const updateDataset = async (data) => {\n  data.owner= {};\n  const apiService = getApiInstance();\n  const config = { headers: {\n      'Authorization': `Token ${localStorage.getItem('token') || ''}`\n    }};\n  try {\n    const res = await apiService.put('datasets/' + data.id + '/', data, config);\n    if( res.status === StatusCodes.UNAUTHORIZED) {\n      localStorage.removeItem('token');\n    }\n    return true;\n  }\n  catch (error) {\n    console.log(error);\n    return false;\n  }\n};\n","import React from 'react';\nimport styles from './styles.module.scss';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nconst Loader = () => (\n  <div className={styles.container}>\n    <div className={styles.loader}>\n      <LoadingOutlined />\n    </div>\n  </div>\n);\n\nexport default React.memo(Loader);\n","import React, { useEffect, useState } from \"react\";\nimport styles from './main.module.scss';\nimport { Input, Modal, Switch } from 'antd';\n\nconst ModalSettings = ({  setSettings,\n                         settingsData,\n                         isOpenSettings,\n                         setIsOpenSettings, ...props }) => {\n  const [data, setData] =useState({...settingsData});\n\n\n\n  const onChange = (e) => {\n    if(typeof e === 'boolean') {\n      setData({...data, is_private: e});\n    }\n    else {\n      const { name, value } = e.target;\n        setData({ ...data, [name]: value });\n    }\n  };\n\n  useEffect(() => {\n    setData(settingsData);\n  },[settingsData])\n\n  return (\n    <Modal visible={isOpenSettings} onCancel={() => setIsOpenSettings(false)}>\n      <div className={styles.settingsContainer}>\n        <div><span>Приватный</span>\n        <Switch value={data?.is_private} onChange={onChange}/>\n        </div>\n        <div className={styles.input}><span>Цена</span><Input\n       name='price' value={data?.price} onChange={onChange}/></div>\n        <button className={styles.button} onClick={() => {\n          setIsOpenSettings(false);\n          setSettings(data);}}>Применить</button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ModalSettings;\n","import React, { useState } from \"react\";\nimport styles from './main.module.scss'\nimport Close from './../../assets/icons/privateClose.svg';\nimport Open from './../../assets/icons/privateOpen.svg';\nimport Settings from './../../assets/icons/settings.svg';\nimport Arrow from './../../assets/icons/link_arrow.svg';\nimport Filter from './../../assets/icons/filter.svg';\nimport './antd.css';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { Checkbox, Input, Table } from 'antd';\nimport moment from 'moment';\nimport { reverse } from 'named-urls';\nimport paths from '../paths';\nimport { getDataSets, updateDataset } from '../../services/dataset';\nimport useAsyncEffect from 'use-async-effect';\nimport Loader from '../loader';\nimport classNames from 'classnames';\nimport ModalSettings from './modal';\n\nconst { Search } = Input;\n\nconst defaultParams = { search: '', is_mine: null, is_purchased: null };\n\nconst MainPage = () => {\n  const location = useLocation();\n  const isMy = (location.pathname === paths.myDatasets);\n  const [requestParams, setRequestParams] = useState({ ...defaultParams });\n  const [choseItem, setChoseItem] = useState(null);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n  const history = useHistory();\n  const isToken = !!localStorage.getItem('token');\n  const [settingsData, setSettingsData] = useState(null);\n  const [isOpenSettings, setIsOpenSettings] = useState(false);\n  useAsyncEffect(async () => {\n    setLoading(true);\n    const res = (isMy) ? await getDataSets({ ...requestParams, is_mine: true }) : await getDataSets(\n      requestParams);\n    setData(res || []);\n    setLoading(false);\n  }, [requestParams]);\n\n  const columns = [\n    {\n      title: '',\n      dataIndex: 'isChecked',\n      key: 'isChecked',\n      width: '30px',\n      render: (isChecked) => {\n        if (isChecked)\n          return <div className={styles.circle} />\n      },\n    },\n    {\n      title: 'Название',\n      dataIndex: 'name',\n      key: 'name',\n      width: '200px',\n      render: (name, item) =>\n        (<>\n            <div>{name}</div>\n            <p className={styles.date}>{moment(item.updated_at).format('DD.MM.YYYY hh:mm')}</p></>\n        ),\n    },\n    {\n      title: 'Описание',\n      dataIndex: 'description',\n      key: 'description',\n    },\n    {\n      title: 'Цена',\n      dataIndex: 'price',\n      key: 'price',\n      render: (price) =>\n        (<div>{price || 'Free'}</div>),\n    },\n    {\n      title: '',\n      dataIndex: 'id',\n      className: styles.tdAction,\n      key: 'action',\n      render: (id) =>\n        (<div onClick={() => history.push(reverse(paths.details, { id }))}\n              className={styles.detailBtn}>Показать детализацию <img alt=\"->\" src={Arrow} /></div>\n        ),\n    },\n  ];\n\n  const columnMy = [\n    {\n      title: 'Название',\n      dataIndex: 'name',\n      key: 'name',\n      render: (name, item) =>\n        (<>\n            <div>{name}</div>\n            <p className={styles.date}>{moment(item.updated_at).format('DD.MM.YYYY hh:mm')}</p></>\n        ),\n    },\n    {\n      title: 'Описание',\n      dataIndex: 'description',\n      key: 'description',\n    },\n    {\n      title: 'Цена',\n      dataIndex: 'price',\n      key: 'price',\n      render: (price) =>\n        (<div>{price || 'Free'}</div>),\n    },\n    {\n      title: '',\n      dataIndex: 'id',\n      key: '',\n      render: (id) =>\n        (<div onClick={() => history.push(reverse(paths.details, { id }))}\n              className={styles.detailBtn}>Показать детализацию <img alt=\"->\" src={Arrow} /></div>\n        ),\n    },\n    {\n      title: '',\n      dataIndex: 'is_private',\n      key: 'is_private',\n      width: '20px',\n      className: styles.tdAction,\n      render: (is_private) => {\n        console.log(is_private);\n          return  <img alt='isPrivate' src={is_private ? Open : Close} />\n      },\n    },\n    {\n      title: '',\n      dataIndex: 'settings',\n      className: styles.tdAction,\n      key: 'name',\n      width: '20px',\n      render: (index, item) => <img onClick={() => {\n        const selectData = data.filter((elem) => item.id === elem.id );\n        setSettingsData(selectData[0]);\n        setIsOpenSettings(true)}} className={styles.tdSettings} alt='isPrivate' src={Settings} />\n    },]\n\n  const updateData = async (item) => {\n    setSettingsData({...item});\n    const res = await updateDataset(item);\n    if(res)\n      setData(data.map((elem) => ( (elem.id ===item.id) ? {...item} : elem )));\n  }\n\n  const onRowClickHandler = (index) => {\n    const newData = data.map((item, i) => {\n      if (i === index) {\n        setChoseItem({ id: item.id, price: item.price });\n      }\n      return ({ ...item, isChecked: (i === index) })\n    });\n    setData(newData);\n  };\n\n  const onSearch = (e) => {\n    if (e.target.value.length > 2 || !e.target.value.length)\n      setRequestParams({ ...requestParams, name: e.target.value })\n  };\n\n  const setVisiblyFilter = () => {\n    if (showFilters)\n      setRequestParams({ ...requestParams, is_mine: null, is_purchased: null })\n    setShowFilters(!showFilters);\n  }\n\n  const setFilters = (e) => {\n    const { name, value } = e.target;\n    setRequestParams({\n      ...requestParams,\n      [name]: !value,\n    });\n  }\n  return (\n    <div className={styles.main}>\n      <h1>{isMy ? 'Мои Датасеты' : 'Датасеты'}</h1>\n      <div className={styles.searchPanel}>\n        <Search\n          className={styles.search}\n          placeholder=\"Поиск по названию, тикеру\"\n          onChange={onSearch}\n        />\n        {!isMy && isToken && <button onClick={setVisiblyFilter}><img alt=\"-\"\n                                                                     src={Filter} /><span>Фильтры</span>\n        </button>}\n      </div>\n      {showFilters && <div className={styles.filters}>\n        <p className={styles.checkbox}>Показать мои датасеты <Checkbox value={requestParams.is_mine}\n                                                                       name=\"is_mine\"\n                                                                       onChange={setFilters} /></p>\n        <p className={styles.checkbox}>Показать купленные датасеты <Checkbox\n          value={requestParams.is_purchased}\n          name=\"is_purchased\" onChange={setFilters} /></p>\n      </div>}\n      {isMy && <ModalSettings\n        setSettings={updateData}\n        settingsData={settingsData}\n        isOpenSettings={isOpenSettings}\n        setIsOpenSettings={setIsOpenSettings}/>}\n      <div className={styles.mainSearchResults}>\n        {!loading && <Table\n          className={classNames({\n            [styles.isMy]: isMy,\n          })}\n          pagination={false}\n          onRow={(record, index) => ({\n            index,\n            onClick: (e) => {if (!isMy) onRowClickHandler(index)},\n          })}\n          locale={{ emptyText: 'Датасеты не найдены' }}\n          dataSource={data}\n          columns={isMy ? columnMy : columns} />}\n        {loading && <Loader />}\n      </div>\n      <div className={styles.footer}>\n        {isToken &&  !isMy && <button disabled={!choseItem?.id || !choseItem?.price}\n                            onClick={() => history.push(`/constructor/${choseItem.id}`)}>Купить\n        </button>}\n        {isToken && isMy && <button\n                            onClick={() => {/* открыть модалку*/}}>Загрузить\n        </button>}\n        {isToken && isMy && <button\n                            onClick={() => history.push(`/details/new`)}>Создать\n        </button>}\n        {!isMy && isToken && <button  disabled={!choseItem?.id}\n                                     onClick={() => history.push(`/constructor/${choseItem.id}/new`)}>Создать\n          фичу\n        </button>}\n      </div>\n    </div>\n  );\n};\n\nexport default MainPage;\n","import Loader from \"./loader\";\n\nexport default Loader;","import React, {useEffect, useState} from \"react\";\nimport {Spin} from \"antd\";\nimport styles from './loader.module.scss';\n\nconst Loader = ({ statusText }) => {\n\tconst [status, setStatus] = useState('');\n\n\tuseEffect(() => {\n\t\tconst loading = setInterval(() => {\n\t\t\tsetStatus((currentValue) => {\n\t\t\t\tif (currentValue.length < 3) {\n\t\t\t\t\treturn currentValue + '.';\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t});\n\t\t}, 300);\n\t\treturn () => {\n\t\t\tclearInterval(loading);\n\t\t}\n\t}, []);\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<Spin />\n\t\t\t{statusText && (\n\t\t\t\t<div className={styles.textWrapper}>\n\t\t\t\t\t<div>{statusText}</div>\n\t\t\t\t\t<div>{status}</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Loader;\n\n\n","import SourceView from \"./sourceView\";\n\nexport default SourceView;","import React from \"react\";\nimport Loader from \"../../../components/loader\";\nimport styles from './sourceView.module.scss';\n\nconst SourceView = ({ data }) => {\n\tif (! data) {\n\t\treturn <Loader statusText={'Выполняется загрузка'}/>;\n\t}\n\n\tconst handleDragStart = (e, item) => {\n\t\te.dataTransfer.setData('text', JSON.stringify(item));\n\t};\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div className={styles.title}>Блок исходного датасета</div>\n\t\t\t<div className={styles.info}>{data.name || '-'}</div>\n\t\t\t<div>\n\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span>Название</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span>Тип данных</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{data.fields.map((item, i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={i} draggable={true} onDragStart={(e) => {\n\t\t\t\t\t\t\t\t\thandleDragStart(e, item);\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span>{item.name}</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span>{item.dataType}</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default SourceView;","export default __webpack_public_path__ + \"static/media/icon_round_plus.b5d7bb3c.svg\";","export default __webpack_public_path__ + \"static/media/close_popup_icon.095d0b32.svg\";","import React, {useCallback, useState} from \"react\";\nimport styles from \"./targetView.module.scss\";\nimport {Button, Input, Popover, Select, Radio} from \"antd\";\nimport icon from '../../../assets/icons/icon_round_plus.svg';\nimport settingIcon from '../../../assets/icons/filter.svg';\nimport closeIcon from '../../../assets/icons/close_popup_icon.svg';\nimport {v4 as uuidv4} from \"uuid\";\n\nconst { Option } = Select;\n\nconst overBoxStyle = {\n\tboxShadow: '4px 4px 23px 6px rgba(55, 151, 245, 0.40)'\n};\n\nconst overTextStyle = {\n\topacity: 0.6\n};\n\nconst onDragOver = (e) => {\n\te.preventDefault();\n}\n\nconst operations = {\n\t'empty': { id: 'empty', name: '-', targetType: 'str_type' },\n\t'string-concat': { id: 'string-concat', name: 'сцепить', targetType: 'str_type' },\n\t'date-year': { id: 'date-year', name: 'вернуть год', targetType: 'int_type' },\n\t'date-month': { id: 'date-month', name: 'вернуть месяц', targetType: 'int_str' },\n\t'date-weekday': { id: 'date-weekday', name: 'вернуть день недели', targetType: 'str_type' },\n\t'date-day': { id: 'date-day', name: 'вернуть число', targetType: 'int_type' },\n\t'date-iso': { id: 'date-iso', name: 'вернуть ISO timestamp', targetType: 'str_type' },\n\t'datetime-year': { id: 'datetime-year', name: 'вернуть год', targetType: 'int_type' },\n\t'datetime-month': { id: 'datetime-month', name: 'вернуть месяц', targetType: 'int_type' },\n\t'datetime-weekday': { id: 'datetime-weekday', name: 'вернуть день недели', targetType: 'int_type' },\n\t'datetime-day': { id: 'datetime-day', name: 'вернуть число', targetType: 'int_type' },\n\t'datetime-iso': { id: 'datetime-iso', name: 'вернуть ISO timestamp', targetType: 'int_type' },\n\t'datetime-hour': { id: 'datetime-hour', name: 'вернуть часы', targetType: 'int_type' },\n\t'datetime-minute': { id: 'datetime-minute', name: 'вернуть минуты', targetType: 'int_type' },\n\t'datetime-second': { id: 'datetime-second', name: 'вернуть секунды', targetType: 'int_type' },\n\t'datetime-timezone': { id: 'datetime-timezone', name: 'вернуть часовой пояс', targetType: 'int_type' },\n\t'datetime-utc': { id: 'datetime-utc', name: 'вернуть в UTC', targetType: 'str_type' },\n\t'int-sum': { id: 'int-sum', name: 'сложить', targetType: 'int_type' },\n\t'int-subtract': { id: 'int-subtract', name: 'вычесть', targetType: 'int_type' },\n\t'int-multiply': { id: 'int-multiply', name: 'умножить', targetType: 'int_type' },\n\t'int-divide': { id: 'int-divide', name: 'разделить', targetType: 'int_type' },\n\t'int-to-string': { id: 'int-to-string', name: 'преобразовать в строку', targetType: 'str_type' },\n\t'float-sum': { id: 'float-sum', name: 'сложить', targetType: 'float_type' },\n\t'float-subtract': { id: 'float-subtract', name: 'вычесть', targetType: 'float_type' },\n\t'float-multiply': { id: 'float-multiply', name: 'умножить', targetType: 'float_type' },\n\t'float-divide': { id: 'float-divide', name: 'разделить', targetType: 'float_type' },\n\t'float-to-string': { id: 'float-to-string', name: 'преобразовать в строку', targetType: 'str_type' }\n}\n\nconst filterOptions = {\n\t'int_type': [\n\t\t{ id: 'empty', name: '-'},\n\t\t{ id: 'int-equal', name: 'равно'},\n\t\t{ id: 'int-greater-or-equal', name: 'больше или равно'},\n\t\t{ id: 'int-smaller-or-equal', name: 'меньше или равно'},\n\t\t{ id: 'int-greater', name: 'больше'},\n\t\t{ id: 'int-smaller', name: 'меньше'},\n\t],\n\t'float_type': [\n\t\t{ id: 'empty', name: '-'},\n\t\t{ id: 'float-equal', name: 'равно'},\n\t\t{ id: 'float-greater-or-equal', name: 'больше или равно'},\n\t\t{ id: 'float-smaller-or-equal', name: 'меньше или равно'},\n\t\t{ id: 'float-greater', name: 'больше'},\n\t\t{ id: 'float-smaller', name: 'меньше'},\n\t],\n\t'date_type': [\n\t\t{ id: 'empty', name: '-'},\n\t\t{ id: 'date-equal', name: 'равно'},\n\t\t{ id: 'date-greater-or-equal', name: 'больше или равно'},\n\t\t{ id: 'date-smaller-or-equal', name: 'меньше или равно'},\n\t\t{ id: 'date-greater', name: 'больше'},\n\t\t{ id: 'date-smaller', name: 'меньше'},\n\t],\n\t'datetime_type': [\n\t\t{ id: 'empty', name: '-'},\n\t\t{ id: 'datetime-equal', name: 'равно'},\n\t\t{ id: 'datetime-greater-or-equal', name: 'больше или равно'},\n\t\t{ id: 'datetime-smaller-or-equal', name: 'меньше или равно'},\n\t\t{ id: 'datetime-greater', name: 'больше'},\n\t\t{ id: 'datetime-smaller', name: 'меньше'},\n\t],\n\t'str_type': [\n\t\t{ id: 'empty', name: '-'},\n\t\t{ id: 'string-equal', name: 'равно'},\n\t\t{ id: 'string-contains', name: 'содержит'},\n\t\t{ id: 'string-not-contains', name: 'не содержит'},\n\t],\n\t'bool_type': [\n\t\t{ id: 'empty', name: '-'},\n\t\t{ id: 'boolean-equal', name: 'равно'},\n\t]\n}\n\nconst getSelectOptions = (type) => {\n\tswitch (type) {\n\t\tcase 'str_type':\n\t\t\treturn [\n\t\t\t\toperations['string-concat'],\n\t\t\t\toperations['empty']\n\t\t\t];\n\t\tcase 'date_type':\n\t\t\treturn [\n\t\t\t\toperations['date-year'],\n\t\t\t\toperations['date-month'],\n\t\t\t\toperations['date-weekday'],\n\t\t\t\toperations['date-day'],\n\t\t\t\toperations['date-iso'],\n\t\t\t\toperations['empty']\n\t\t\t];\n\t\tcase 'datetime_type':\n\t\t\treturn [\n\t\t\t\toperations['datetime-year'],\n\t\t\t\toperations['datetime-month'],\n\t\t\t\toperations['datetime-weekday'],\n\t\t\t\toperations['datetime-day'],\n\t\t\t\toperations['datetime-iso'],\n\t\t\t\toperations['datetime-hour'],\n\t\t\t\toperations['datetime-minute'],\n\t\t\t\toperations['datetime-second'],\n\t\t\t\toperations['datetime-timezone'],\n\t\t\t\toperations['datetime-utc'],\n\t\t\t\toperations['empty']\n\t\t\t];\n\t\tcase 'int_type':\n\t\t\treturn [\n\t\t\t\toperations['int-sum'],\n\t\t\t\toperations['int-subtract'],\n\t\t\t\toperations['int-multiply'],\n\t\t\t\toperations['int-divide'],\n\t\t\t\toperations['int-to-string'],\n\t\t\t\toperations['empty']\n\t\t\t];\n\t\tcase 'float_type':\n\t\t\treturn [\n\t\t\t\toperations['float-sum'],\n\t\t\t\toperations['float-subtract'],\n\t\t\t\toperations['float-multiply'],\n\t\t\t\toperations['float-divide'],\n\t\t\t\toperations['float-to-string'],\n\t\t\t\toperations['empty']\n\t\t\t];\n\t\tdefault:\n\t\t\treturn [\n\t\t\t\toperations['empty']\n\t\t\t];\n\t}\n};\n\nconst TargetView = ({data, sourceData, addField, addStep, updateName, updateField}) => {\n\t// console.log('target is ', data);\n\tconst [overFilter, setOverFilter] = useState(false);\n\tconst [overFilterCou, setOverFilterCou] = useState(0);\n\tconst [overTransform, setOverTransform] = useState(false);\n\tconst [overTransformCou, setOverTransformCou] = useState(0);\n\tconst [overBlock, setOverBlock] = useState(false);\n\tconst [overBlockCou, setOverBlockCou] = useState(0);\n\n\tconst handleNameChange = useCallback((e) => {\n\t\tupdateName(e.target.value, data.id);\n\t}, [data]);\n\n\tconst onDragEnterFilter = (e) => {\n\t\tif (overFilterCou === 0) {\n\t\t\tsetOverFilter(true);\n\t\t}\n\t\tsetOverFilterCou(overFilterCou + 1);\n\t}\n\n\tconst onDragLeaveFilter = (e) => {\n\t\tif (overFilterCou === 1) {\n\t\t\tsetOverFilter(false);\n\t\t}\n\t\tsetOverFilterCou(overFilterCou - 1);\n\t}\n\n\tconst onDropFilter = (e) => {\n\t\te.preventDefault();\n\t\tlet field = null;\n\t\ttry {\n\t\t\tfield = JSON.parse(e.dataTransfer.getData(\"text\"));\n\t\t} catch(err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t\taddStep('filter', sourceData, field);\n\t};\n\n\tconst onDragEnterTransform = (e) => {\n\t\tif (overTransformCou === 0) {\n\t\t\tsetOverTransform(true);\n\t\t}\n\t\tsetOverTransformCou(overTransformCou + 1);\n\t}\n\n\tconst onDragLeaveTransform = (e) => {\n\t\tif (overTransformCou === 1) {\n\t\t\tsetOverTransform(false);\n\t\t}\n\t\tsetOverTransformCou(overTransformCou - 1);\n\t}\n\n\tconst onDropTransform = (e) => {\n\t\te.preventDefault();\n\t\tlet field = null;\n\t\ttry {\n\t\t\tfield = JSON.parse(e.dataTransfer.getData(\"text\"));\n\t\t} catch(err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t\taddStep('transform', sourceData, field);\n\t};\n\n\tconst onDragEnterBlock = (e) => {\n\t\tif (overBlockCou === 0) {\n\t\t\tsetOverBlock(true);\n\t\t}\n\t\tsetOverBlockCou(overBlockCou + 1);\n\t}\n\n\tconst onDragLeaveBlock = (e) => {\n\t\tif (overBlockCou === 1) {\n\t\t\tsetOverBlock(false);\n\t\t}\n\t\tsetOverBlockCou(overBlockCou - 1);\n\t}\n\n\tconst onDropBlock = (e) => {\n\t\te.preventDefault();\n\t\tlet field = null;\n\t\ttry {\n\t\t\tfield = JSON.parse(e.dataTransfer.getData(\"text\"));\n\t\t} catch(err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t\taddField({\n\t\t\tid: uuidv4(),\n\t\t\tsourceField: field.id,\n\t\t\tsourceType: field.dataType,\n\t\t\tdataType: field.dataType,\n\t\t\tname: field.name,\n\t\t\tdesc: field.desc,\n\t\t\tisOpen: false,\n\t\t\toperation: 'empty',\n\t\t\tvalue: '',\n\t\t\tdelimiter: '',\n\t\t\trefs: []\n\t\t});\n\t};\n\n\tif (! data) {\n\t\treturn (\n\t\t\t<div className={styles.emptyContainer}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={styles.addTransfrom}>\n\t\t\t\t\t<div className={styles.contentOutline}\n\t\t\t\t\t\t style={overTransform ? overBoxStyle : {} }\n\t\t\t\t\t\t onDragEnter={onDragEnterTransform}\n\t\t\t\t\t\t onDragLeave={onDragLeaveTransform}\n\t\t\t\t\t\t onDrop={onDropTransform}\n\t\t\t\t\t\t onDragOver={onDragOver}>\n\t\t\t\t\t\t<div style={overTransform ? overTextStyle : {} }>Преобразование</div>\n\t\t\t\t\t\t<img src={icon}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={styles.addFilter}>\n\t\t\t\t\t<div className={styles.contentOutline}\n\t\t\t\t\t\t style={overFilter ? overBoxStyle : {} }\n\t\t\t\t\t\t onDragEnter={onDragEnterFilter}\n\t\t\t\t\t\t onDragLeave={onDragLeaveFilter}\n\t\t\t\t\t\t onDrop={onDropFilter}\n\t\t\t\t\t\t onDragOver={onDragOver}>\n\t\t\t\t\t\t<div style={overFilter ? overTextStyle : {} }>Фильтрация</div>\n\t\t\t\t\t\t<img src={icon}/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={styles.container}\n\t\t\tstyle={overBlock ? overBoxStyle : {} }\n\t\t\tonDragEnter={onDragEnterBlock}\n\t\t\tonDragLeave={onDragLeaveBlock}\n\t\t\tonDrop={onDropBlock}\n\t\t\tonDragOver={onDragOver}>\n\t\t\t<div className={styles.title}>Блок нового датасета\n\t\t\t\t<span>({data.type === 'filter' ? 'Фильтрация' : 'Преобразование'})</span>\n\t\t\t</div>\n\t\t\t<div className={styles.info}>\n\t\t\t\t<Input\n\t\t\t\t\tvalue={data.name}\n\t\t\t\t\tonChange={handleNameChange}\n\t\t\t\t\tsize='default'\n\t\t\t\t\ttype='text'\n\t\t\t\t\tplaceholder={'укажите название нового датасета'}/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{data.type === 'filter' && (\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span>Название</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span>Тип данных</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{data && data.fields.map((item, i) => {\n\n\t\t\t\t\t\t\tconst getFilterContent = () => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className={styles.popup}>\n\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\tНазвание поля\n\t\t\t\t\t\t\t\t\t\t\t<Input value={item.name} onChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: e.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t{item.dataType !== 'bool_type' && (\n\t\t\t\t\t\t\t\t\t\t\t<label className={styles.operation}>\n\t\t\t\t\t\t\t\t\t\t\t\tОперация сравнения\n\t\t\t\t\t\t\t\t\t\t\t\t<Select className={styles.selectFilterOp} value={item.operation} size='small' onSelect={(value) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toperation: value\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{filterOptions[item.dataType].map((item) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Option key={item.id} value={item.id}>{item.name}</Option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{item.dataType !== 'bool_type' && (\n\t\t\t\t\t\t\t\t\t\t\t<label className={styles.operation}>\n\t\t\t\t\t\t\t\t\t\t\t\tЗначение\n\t\t\t\t\t\t\t\t\t\t\t\t<Input value={item.value} onChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: e.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{item.dataType === 'bool_type' && (\n\t\t\t\t\t\t\t\t\t\t\t<label className={styles.bool}>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>Значение</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<Radio.Group\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: e.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Radio value={true}>Да</Radio>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Radio value={false}>Нет</Radio>\n\t\t\t\t\t\t\t\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={closeIcon}\n\t\t\t\t\t\t\t\t\t\t\tclassName={styles.closePopup}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={i} style={item.isFiltered ? {} : { display: 'none' }}>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div className={styles.targetControls}>\n\t\t\t\t\t\t\t\t\t\t\t<span>{item.name}</span>\n\t\t\t\t\t\t\t\t\t\t\t<div className={styles.rightPartBlock}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible={item.isOpen}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplacement='left'\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent={getFilterContent()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.img}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={settingIcon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span>{item.dataType}</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t)}\n\t\t\t\t{data.type === 'transform' && (\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span>Название</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t<span>Тип данных</span>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{data && data.fields.map((item, i) => {\n\n\t\t\t\t\t\t\tconst getPopupContent = () => {\n\t\t\t\t\t\t\t\tif (data.type === 'filter') {\n\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (item.operation === 'empty') {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div className={styles.popup}>\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Выберите операцию преобразования</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={closeIcon}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.closePopup}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div className={styles.popup}>\n\t\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t\tНазвание поля\n\t\t\t\t\t\t\t\t\t\t\t\t<Input value={item.name} onChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: e.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t{['string-concat'].indexOf(item.operation) >= 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t\t\tРазделитель\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value={item.delimiter} onChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelimiter: e.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{['int-sum', 'int-subtract', 'int-multiply', 'int-divide',\n\t\t\t\t\t\t\t\t\t\t\t\t'float-sum', 'float-subtract', 'float-multiply', 'float-divide'].indexOf(item.operation) >= 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t\t\tКонстанта\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input value={item.value} onChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: e.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{['string-concat', 'int-sum', 'int-subtract', 'int-multiply', 'int-divide',\n\t\t\t\t\t\t\t\t\t\t\t\t'float-sum', 'float-subtract', 'float-multiply', 'float-divide'].indexOf(item.operation) >= 0 && item.refs.map((ref, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.marginTop}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ref}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst refs = item.refs;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (item.refs.indexOf(newValue) >= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trefs[i] = newValue;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trefs: refs\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{data.prevTarget.fields.map((opt, j) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(opt.dataType !== item.dataType ){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (item.sourceField === opt.id || (item.refs.indexOf(opt.id) >= 0) && opt.id !== ref) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Option key={j} value={opt.id}>{opt.name}</Option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t{['string-concat', 'int-sum', 'int-subtract', 'int-multiply', 'int-divide',\n\t\t\t\t\t\t\t\t\t\t\t\t'float-sum', 'float-subtract', 'float-multiply', 'float-divide'].indexOf(item.operation) >= 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.marginTop}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.refs.push('');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trefs: item.refs\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>Добавить поле</Button>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={closeIcon}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.closePopup}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<div className={styles.targetControls}>\n\t\t\t\t\t\t\t\t\t\t\t<span>{item.name}</span>\n\t\t\t\t\t\t\t\t\t\t\t<div className={styles.rightPartBlock}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Select className={styles.select} value={item.operation} size='small' onSelect={(value) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toperation: value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdataType: value === 'empty' ? item.sourceType : operations[value]['targetType']\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{getSelectOptions(item.sourceType).map((item) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Option key={item.id} value={item.id}>{item.name}</Option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\t\t\t\t\t\t\tvisible={item.isOpen}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplacement='left'\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent={getPopupContent()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={styles.img}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={settingIcon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateField({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...item,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisOpen: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span>{item.dataType}</span>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t)\n};\n\nexport default TargetView;","import TargetView from \"./targetView\";\n\nexport default TargetView;","import React, {useCallback, useEffect, useState} from \"react\";\nimport { useParams } from 'react-router-dom';\nimport styles from './constructor.module.scss';\nimport SourceView from \"./sourceView\";\nimport TargetView from \"./targetView\";\nimport {fetchDataset, fetchPostFeature, fetchSchema} from \"../../services/dataset\";\nimport {Button, Pagination} from \"antd\";\nimport { v4 as uuidv4 } from 'uuid';\nimport cloneDeep from 'lodash/cloneDeep';\nimport Loader from \"../../components/loader\";\n\nconst initialData = {\n\tsource: null,\n\tsteps: [],\n\tcurrentStep: 0,\n}\n\nconst ConstructorPage = () => {\n\tconst { urn, id } = useParams();\n\tconst [data, setData] = useState(initialData);\n\tconst [isSaving, setIsSaving] = useState(false);\n\n\tuseEffect(() => {\n\t\tswitch (id) {\n\t\t\tcase 'new':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfetchSchema(id).then((jsonResp) => {\n\t\t\t\t\tsetData((currentData) => {\n\t\t\t\t\t\tconst newData = cloneDeep(currentData);\n\t\t\t\t\t\tnewData.steps = jsonResp.steps;\n\t\t\t\t\t\treturn newData;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t// fetch backend\n\t\t}\n\t}, [id]);\n\n\tconst addStep = useCallback((type) => {\n\t\tsetData((currentValue) => {\n\t\t\tconst newValue = cloneDeep(currentValue);\n\t\t\tconst currentTarget = newValue.steps[newValue.currentStep];\n\t\t\tif (currentTarget.hasChild) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcurrentTarget.hasChild = true;\n\t\t\tconst newItem = {\n\t\t\t\tid: uuidv4(),\n\t\t\t\ttype: type,\n\t\t\t\tname: '',\n\t\t\t\thasChild: false,\n\t\t\t\tprevTarget: currentTarget,\n\t\t\t\tfields: []\n\t\t\t};\n\t\t\tif (type === 'filter') {\n\t\t\t\tnewItem.fields = currentTarget.fields.map((pos) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...pos,\n\t\t\t\t\t\tisFiltered: false\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\tnewValue.steps.push(newItem);\n\t\t\treturn newValue;\n\t\t});\n\t}, []);\n\n\tconst addStepWithField = useCallback((type, prevTarget, field) => {\n\t\tsetData((currentValue) => {\n\t\t\tconst newValue = cloneDeep(currentValue);\n\t\t\tconst newItem = {\n\t\t\t\tid: uuidv4(),\n\t\t\t\ttype: type,\n\t\t\t\tname: '',\n\t\t\t\thasChild: false,\n\t\t\t\tprevTarget: prevTarget,\n\t\t\t\tfields: []\n\t\t\t};\n\t\t\tnewItem.fields.push({\n\t\t\t\tid: uuidv4(),\n\t\t\t\tsourceField: field.id,\n\t\t\t\tsourceType: field.dataType,\n\t\t\t\tdataType: field.dataType,\n\t\t\t\tname: field.name,\n\t\t\t\tdesc: field.desc,\n\t\t\t\tisOpen: false,\n\t\t\t\toperation: 'empty',\n\t\t\t\tvalue: '',\n\t\t\t\tdelimiter: '',\n\t\t\t\trefs: []\n\t\t\t});\n\t\t\tif (type === 'filter') {\n\t\t\t\tnewItem.fields = prevTarget.fields.map((prev) => {\n\t\t\t\t\tif (prev.id === field.id) {\n\t\t\t\t\t\tprev.isFiltered = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn prev;\n\t\t\t\t});\n\t\t\t}\n\t\t\tnewValue.steps.push(newItem);\n\t\t\treturn newValue;\n\t\t});\n\t}, []);\n\n\tconst addField = useCallback((newField) => {\n\t\tsetData((currentValue) => {\n\t\t\tconst newValue = cloneDeep(currentValue);\n\t\t\tconst target = newValue.steps[newValue.currentStep];\n\t\t\tif (! target) {\n\t\t\t\tconsole.error('Cant find target with id ', newValue.currentStep);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(target.type === 'filter') {\n\t\t\t\ttarget.fields = target.fields.map((item) => {\n\t\t\t\t\tif (item.id === newField.sourceField) {\n\t\t\t\t\t\titem.isFiltered = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\treturn newValue;\n\t\t\t}\n\t\t\tconst exist = target.fields.find((item) => {\n\t\t\t\treturn item.sourceField === newField.sourceField;\n\t\t\t});\n\t\t\tif (exist) {\n\t\t\t\treturn newValue;\n\t\t\t}\n\t\t\ttarget.fields.push(newField);\n\t\t\treturn newValue;\n\t\t});\n\t});\n\n\tconst updateField = useCallback((newField) => {\n\t\tsetData((currentValue) => {\n\t\t\tconst newValue = cloneDeep(currentValue);\n\t\t\tconst target = newValue.steps[newValue.currentStep];\n\t\t\tif (!target) {\n\t\t\t\tconsole.error('Cant find target with id ', newValue.currentStep);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttarget.fields = target.fields.map((item) => {\n\t\t\t\treturn item.id === newField.id ? newField : item;\n\t\t\t});\n\t\t\treturn newValue;\n\t\t});\n\t}, []);\n\n\tconst updateName = useCallback((newName, targetId) => {\n\t\tsetData((currentValue) => {\n\t\t\tconst newValue = cloneDeep(currentValue);\n\t\t\tconst target = newValue.steps[newValue.currentStep];\n\t\t\tif (! target) {\n\t\t\t\tconsole.error('Cant find target with id ', newValue.currentStep);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttarget.name = newName;\n\t\t\treturn newValue;\n\t\t})\n\t}, [])\n\n\tuseEffect(() => {\n\t\tfetchDataset(urn).then((datasetData) => {\n\t\t\tsetData((currentData) => {\n\t\t\t\treturn {\n\t\t\t\t\t...currentData,\n\t\t\t\t\tsource: datasetData\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}, [urn]);\n\n\tif (isSaving) {\n\t\treturn (\n\t\t\t<div className={styles.wrapper}>\n\t\t\t\t<Loader statusText={'Выполняется сохранение'}/>\n\t\t\t</div>\n\t\t)\n\t}\nconsole.log(data);\n\treturn (\n\t\t<div className={styles.wrapper}>\n\t\t\t<div className={styles.sourceContainer}>\n\t\t\t\t<SourceView data={(data.steps.length > 0 && data.steps[data.currentStep].prevTarget) || data.source}/>\n\t\t\t</div>\n\t\t\t<div className={styles.targetContainer}>\n\t\t\t\t<TargetView\n\t\t\t\t\tdata={data.steps[data.currentStep]}\n\t\t\t\t\tsourceData={data.source}\n\t\t\t\t\taddField={addField}\n\t\t\t\t\taddStep={addStepWithField}\n\t\t\t\t\tupdateField={updateField}\n\t\t\t\t\tupdateName={updateName}/>\n\t\t\t</div>\n\t\t\t{data.steps.length > 0 && (\n\t\t\t\t<div className={styles.pagination}>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tcurrent={data.currentStep + 1}\n\t\t\t\t\t\tpageSize={1}\n\t\t\t\t\t\ttotal={data.steps.length}\n\t\t\t\t\t\tonChange={(page) => {\n\t\t\t\t\t\t\tconsole.log('page ', page);\n\t\t\t\t\t\t\tsetData((currentValue) => {\n\t\t\t\t\t\t\t\tconst newValue = cloneDeep(currentValue);\n\t\t\t\t\t\t\t\tnewValue.currentStep = page - 1;\n\t\t\t\t\t\t\t\treturn newValue;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}/>\n\t\t\t\t\t{! data.steps[data.currentStep].hasChild && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={styles.create}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\taddStep('transform');\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tДобавить трансформацию\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{! data.steps[data.currentStep].hasChild && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={styles.create}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\taddStep('filter');\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\tДобавить фильтрацию\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={styles.saveBtn}>\n\t\t\t\t<Button className={styles.saveBtnText} onClick={() => {\n\t\t\t\t\tconst dataToSend = cloneDeep(data);\n\t\t\t\t\tsetIsSaving(true);\n\t\t\t\t\tfetchPostFeature(dataToSend).then((result) => {\n\t\t\t\t\t\tsetIsSaving(false);\n\t\t\t\t\t});\n\t\t\t\t}}>\n\t\t\t\t\tСохранить\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ConstructorPage;","export default __webpack_public_path__ + \"static/media/avatar.1a160393.svg\";","export default __webpack_public_path__ + \"static/media/error.84ea648d.svg\";","import React, { useState } from \"react\";\nimport { useParams } from 'react-router-dom';\nimport { Collapse, Table, Input, Select, Modal } from 'antd';\nimport Avatar from './../../assets/icons/avatar.svg';\nimport Error from './../../assets/icons/error.svg';\nimport  styles from './details.module.scss';\nimport { fetchDataset, purchaseDataset, createDataset, fetchDataTypes } from '../../services/dataset';\nimport useAsyncEffect from 'use-async-effect';\nimport { useHistory } from 'react-router-dom';\nimport { reverse } from 'named-urls';\nimport paths from '../paths';\n// import Delete from '../../assets/icons/delete.svg'\nimport Loader from '../loader';\nimport './antd.css';\n\nconst { Panel } = Collapse;\nconst { Option } = Select;\n\nconst defaultData = {\n\tdescription: '',\n\tprice: 0,\n\tfields : [],\n}\n\nconst columns = [\n\t{\n\t\ttitle: 'Название поля',\n\t\tdataIndex: 'name',\n\t\tkey: 'name',\n\t\twidth: '240px'\n\t},\n\t{\n\t\ttitle: 'Тип данных',\n\t\tdataIndex: 'dataType',\n\t\tkey: 'dataType',\n\t\twidth: '200px',\n\t\trender: (item) => (\n\t\t\t<span>{item?.split('_')[0] || ''}</span>\n\t\t),\n\t},\n\t{\n\t\ttitle: 'Описание',\n\t\tdataIndex: 'desc',\n\t\tkey: 'desc',\n\t\twidth: '840px'\n\t},\n\t// {\n\t// \ttitle: '',\n\t// \tdataIndex: 'id',\n\t// \tclassName: styles.tdAction,\n\t// \tkey: 'action',\n\t// \trender: (id) =>\n\t// \t  (<div className={styles.detailBtn}><img alt=\"delete\" src={Delete} /></div>\n\t// \t  ),\n\t//   },\n];\n\nconst DetailsPage = () => {\n\tconst { id } = useParams();\n\tconst history = useHistory();\n\tconst [data, setData] = useState(defaultData);\n\tconst [types, setTypes] = useState([]);\n\tconst [newData, setNewData] = useState(defaultData.fields);\n\tconst [loading, setLoading] = useState(false);\n\tconst [error, setError] = useState(false);\n\tconst [isModalVisible, setIsModalVisible] = useState(false);\n\n\tuseAsyncEffect(async () => {\n\t\tsetLoading(true);\n\t\tif (id !== 'new') {\n\t\t\tconst res = await fetchDataset(id);\n\t\t\tif (res) {\n\t\t\t\tsetData(res || {});\n\t\t\t\tsetNewData(res?.fields || []);\n\t\t\t} else {\n\t\t\t\thistory.push(paths.main);\n\t\t\t}\n\t\t} else {\n\t\t\tconst res = await fetchDataTypes(id);\n\t\t\tsetTypes(res);\n\t\t}\n\t\tsetLoading(false);\n\t  }, [id]);\n\n\tconst addNew = () => {\n\t\tconst tmp = data?.fields?.slice() || [];\n\t\ttmp.push(newData);\n\t\tsetData({...data, fields: tmp });\n\t\tsetNewData([]);\n\t};\n\n\tconst purchase = async () => {\n\t\tconst res = await purchaseDataset(id);\n\t\tsetData({...data, isPurchased: res === 'Done!'});\n\t\tsetIsModalVisible(res === 'Not enough money!');\n\t}\n\n\tconst create = async () => {\n\t\tif (! data.name)\n\t\t\tsetError('Пожалуйста, заполните название датасета');\n\t\telse if (isNaN(data.price))\n\t\t\tsetError('Поле \"Стоимость\" должно быть числом.');\n\t\telse {\n\t\t\tconst res = await createDataset(data);\n\t\t\tsetError('');\n\t\t\tconst id = res?.id;\n\t\t\thistory.push(reverse(paths.details, { id }));\n\t\t}\n\t}\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div className={styles.main}>\n\t\t\t\t<h1>{id === 'new' ? 'Создание датасета' : 'Детализация'}</h1>\n\t\t\t\t{! loading && <>\n\t\t\t\t<div className={styles.descriptionBlock}>\n\t\t\t\t\t<img src={Avatar}/>\n\t\t\t\t\t{id === 'new' ?\n\t\t\t\t\t\t<div className={styles.addNew}>\n\t\t\t\t\t\t\t<Input placeholder='Введите название датасета' value={data.fields.name} onChange={(e) => setData({...data, name: e.target.value})}/>\n\t\t\t\t\t\t\t<Input placeholder='Введите стоимость' onChange={(e) => setData({...data, price: e.target.value})}/>\n\t\t\t\t\t\t\t<div className={styles.description}>\n\t\t\t\t\t\t\t\t<Input placeholder='Введите описание' value={data.fields.description} onChange={(e) => setData({...data, description: e.target.value})}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<p className={styles.title}>{data.name}</p>\n\t\t\t\t\t\t\t<div className={styles.owner}>\n\t\t\t\t\t\t\t\t<p>Владелец</p>\n\t\t\t\t\t\t\t\t<p>{data.owner}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p>Стоимость</p>\n\t\t\t\t\t\t\t\t<p>{data.price ? data.price : \"free\"}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.description}>\n\t\t\t\t\t\t\t\t<p>Описание</p>\n\t\t\t\t\t\t\t\t<p>{data.description}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t\t{loading && <Loader/>}\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.error}>{error}</div>\n\t\t\t\t{id !== 'new' && !data.isPurchased && !data.isMine && <>\n\t\t\t\t\t{!! data.price && <button className={styles.firstBtn} onClick={purchase}>Купить</button>}\n\t\t\t\t\t<button className={styles.defaultBtn} onClick={() => history.push(`/constructor/${id}/new`)}>Перейти в конструктор</button>\n\t\t\t\t</>}\n\t\t\t\t{(data.isPurchased || data.isMine) && <>\n\t\t\t\t\t<button className={styles.defaultBtn} onClick={() => history.push(`/constructor/${id}/new`)}>Перейти в конструктор</button>\n\t\t\t\t\t<button className={styles.secondBtn} onClick={() => history.goBack()}>Вернуться назад</button>\n\t\t\t\t</>}\n\t\t\t</>}\n\t\t\t</div>\n\t\t\t<div className={styles.main}>\n\t\t\t\t{id === 'new' &&\n\t\t\t\t\t<div className={styles.addNewBlock}>\n\t\t\t\t\t\t<Input placeholder='Введите название поля' value={newData.name} onChange={(e) => setNewData({...newData, name: e.target.value})}/>\n\t\t\t\t\t\t<Select className={styles.select} size='small' value={newData.dataType} onSelect={(value) => setNewData({...newData, dataType: value})}>\n\t\t\t\t\t\t\t{types.map((item) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Option key={item} value={item}>{item.split('_')[0]}</Option>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<Input placeholder='Введите описание поля' value={newData.desc} onChange={(e) => setNewData({...newData, desc: e.target.value})}/>\n\t\t\t\t\t\t<button className={styles.addBtn} onClick={addNew}>Добавить</button>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<Collapse defaultActiveKey=\"1\">\n\t\t\t\t\t<Panel header=\"Показать данные\" key=\"1\">\n\t\t\t\t\t\t<div className={styles.mainSearchResults}>\n\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\trowKey={data?.fields?.name}\n\t\t\t\t\t\t\t\tpagination={false}\n\t\t\t\t\t\t\t\tlocale={{ emptyText: 'Нет данных' }}\n\t\t\t\t\t\t\t\tdataSource={data.fields}\n\t\t\t\t\t\t\t\tcolumns={columns}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Panel>\n\t\t\t\t</Collapse>\n\t\t\t</div>\n\t\t\t{id === 'new' && <button className={styles.saveBtn} onClick={create} okText=\"Пополнить счёт\" cancelText=\"Отказаться\">Сохранить</button>}\n\t\t\t<Modal visible={isModalVisible} onCancel={() => setIsModalVisible(false)}>\n\t\t\t\t<div className={styles.modalTitle}>\n\t\t\t\t\t<img src={Error}/>\n\t\t\t\t\t<h2>У вас недостаточно средств для оплаты</h2>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.modalBtn}>\n\t\t\t\t\t<button className={styles.firstBtn} onClick={() => setIsModalVisible(false)}>Пополнить счёт</button>\n\t\t\t\t\t<button className={styles.defaultBtn} onClick={() => setIsModalVisible(false)}>Отказаться</button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n};\n\nexport default DetailsPage;\n","import DetailsPage from \"./details\";\n\nexport default DetailsPage;","import React, { useState } from \"react\";\nimport styles from '../main/main.module.scss'\nimport Arrow from '../../assets/icons/link_arrow.svg';\nimport '../main/antd.css';\nimport { useHistory } from 'react-router-dom';\nimport { Table } from 'antd';\nimport moment from 'moment';\nimport { reverse } from 'named-urls';\nimport paths from '../paths';\nimport { getFeature } from '../../services/dataset';\nimport useAsyncEffect from 'use-async-effect';\nimport Loader from '../loader';\n\nconst Feature = () => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  useAsyncEffect(async () => {\n    setLoading(true);\n    const res = await getFeature();\n    setData(res || []);\n    setLoading(false);\n  }, []);\n\n  const columns = [\n    {\n      title: 'Название',\n      dataIndex: 'name',\n      key: 'name',\n      width: '200px',\n      render: (name, item) =>\n        (<>\n            <div>{name}</div>\n            <p className={styles.date}>{moment(item.updated_at).format('DD.MM.YYYY hh:mm')}</p></>\n        ),\n    },\n    {\n      title: 'Описание',\n      dataIndex: 'description',\n      key: 'description',\n    },\n    {\n      title: '',\n      dataIndex: 'description',\n      className: styles.tdAction,\n      key: 'description',\n      render: (id, item) => {\n        return (<div onClick={() => history.push(reverse(paths.constructor, { id: item.id, urn: item.description }))}\n              className={styles.detailBtn}>Показать детализацию <img alt=\"->\" src={Arrow} /></div>\n        )\n      }\n        ,\n    },\n    {\n      title: '',\n      dataIndex: 'id',\n      className: styles.tdAction,\n      key: 'id',\n      render: (id, item) =>{\n       return (<div onClick={()=> window.location.href = `http://ec2-18-219-12-230.us-east-2.compute.amazonaws.com/back/api/schemas/${item.id}/download`}\n              className={styles.detailBtn}>Скачать</div>\n        )},\n    },\n  ];\n\n  return (\n    <div className={styles.main}>\n      <h1>Мои фичи</h1>\n      <div className={styles.mainSearchResults}>\n        {!loading && <Table\n          pagination={false}\n          locale={{ emptyText: 'Фичи не найдены' }}\n          dataSource={data}\n          columns={columns} />}\n        {loading && <Loader />}\n      </div>\n    </div>\n  );\n};\n\nexport default Feature;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport paths from './pages/paths';\nimport MainPage from './pages/main/main';\nimport ConstructorPage from \"./pages/constructor/constructor\";\nimport DetailsPage from './pages/details';\nimport Feature from './pages/feature/feature';\n\nconst routes = {\n  index: {\n    path: paths.index,\n    component: () => <Redirect to={paths.main} />,\n  },\n  constructor: {\n    path: paths.constructor,\n      component: () => <ConstructorPage/>,\n  },\n  feature: {\n    path: paths.feature,\n    component: () => <Feature/>,\n  },\n  main: {\n    path: [paths.main, paths.myDatasets],\n    component: () => <MainPage />,\n  },\n  details: {\n    path: paths.details,\n    component: () => <DetailsPage />,\n  },\n};\n\nexport default routes;\n","export default __webpack_public_path__ + \"static/media/logo.da8320c0.svg\";","export default __webpack_public_path__ + \"static/media/google.0299b897.svg\";","import LoginPage from \"./login\";\n\nexport default LoginPage;","import React from \"react\";\nimport { v4 as uuidv4 } from 'uuid';\nimport styles from './styles.module.scss';\nimport GoogleIcon from '../../assets/icons/google.svg';\nimport { Modal } from 'antd';\nimport './antd.css';\n\nconst LoginPage = (props) => {\n\tconst goToTheGoogle = () => {\n\t\tconst uuid = uuidv4();\n\t\tlocalStorage.setItem('token', uuid);\n\t\twindow.location.href = `http://ec2-18-219-12-230.us-east-2.compute.amazonaws.com/back/core/login?token=${uuid}`;\n\t\tprops.setIsModalAuthOpen(false);\n\t\tprops.setIsToken(true);\n\t}\n\treturn (\n\t\t<Modal visible={props.isModalAuthOpen} onCancel={() => props.setIsModalAuthOpen(false)}>\n\t\t\t<div className={styles.auth}>\n\t\t\t\t<p>Вход</p>\n\t\t\t\t<button  className={styles.authBtn} onClick={goToTheGoogle}><img  className={styles.icon} src={GoogleIcon} alt='icon'/><span>Войти через Google</span></button>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n};\n\nexport default LoginPage;\n","import React, { useState } from 'react';\nimport styles from './styles.module.scss';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport paths from '../paths';\nimport Logo from '../../assets/icons/logo.svg';\nimport LoginPage from '../login';\n\nconst DefaultLayout = (props) => {\n  const [isToken, setIsToken] = useState(!! localStorage.getItem('token'));\n  const [isModalAuthOpen, setIsModalAuthOpen] = useState(false);\n  const history = useHistory();\n  const actionAuth = () => {\nif (!isToken) {\n  setIsModalAuthOpen(true);\n}\n  else {\n    localStorage.removeItem('token');\n    setIsToken(false);\n  }\n}\n  return (\n    <div className={styles.appContainer}>\n      <div className={styles.header}>\n        <div className={styles.leftNav}>\n          <img onClick={() => history.push(paths.index)} src={Logo} alt='logo-vtb' />\n          <nav className={styles.nav}>\n            <NavLink activeClassName={styles.active} to={paths.main}>Главная</NavLink>\n            {isToken && <NavLink activeClassName={styles.active} to={paths.feature}>Мои расчеты</NavLink>}\n            {isToken && <NavLink activeClassName={styles.active} to={paths.myDatasets}>Мои датасеты</NavLink>}\n          </nav>\n        </div>\n        <div  className={styles.rightNav} onClick={actionAuth}>{isToken ? 'Выйти' : 'Войти'}</div>\n      </div>\n      <div className={styles.contentContainer}>\n        {isModalAuthOpen && <LoginPage setIsToken={setIsToken} setIsModalAuthOpen={setIsModalAuthOpen} isModalAuthOpen={isModalAuthOpen}/>}\n        {props.children}\n      </div>\n    </div>\n  );\n}\n\nexport default DefaultLayout;\n","import React, { useCallback } from 'react';\nimport { Route } from 'react-router-dom';\nimport DefaultLayout from './layouts/defaultLayout';\n\nconst PrivateRoute = ({\n\tcomponent: PrivateComponent,\n\tlocation,\n\t...rest\n}) => {\n\tconst renderedComponent = useCallback(\n\t\t(prop) => <PrivateComponent {...prop}/>,\n\t\t[]);\n\treturn (\n\t\t<DefaultLayout>\n\t\t\t<Route\n\t\t\t\texact\n\t\t\t\t{...rest}\n\t\t\t\tcomponent={renderedComponent}\n\t\t\t/>\n\t\t</DefaultLayout>\n\t);\n};\n\nexport default PrivateRoute;\n","import './App.css';\nimport './Additional.css';\nimport {BrowserRouter, Switch} from \"react-router-dom\";\nimport routes from './routes';\nimport PrivateRoute from './pages/privateRoute';\n\nconst privateRoutesList = Object.values(routes);\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        {privateRoutesList.map((route) =>\n          <PrivateRoute key={route.path} exact path={route.path} component={route.component} />,\n        )}\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"constructor_wrapper__2Ev32\",\"sourceContainer\":\"constructor_sourceContainer__1lSPo\",\"targetContainer\":\"constructor_targetContainer__3mDIu\",\"pagination\":\"constructor_pagination__1vFZU\",\"create\":\"constructor_create__24n_x\",\"saveBtn\":\"constructor_saveBtn__2S3PZ\",\"saveBtnText\":\"constructor_saveBtnText__7E9Op\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header___egRr\",\"rightNav\":\"styles_rightNav__3mEEH\",\"leftNav\":\"styles_leftNav__34Lrf\",\"nav\":\"styles_nav__3bIJb\",\"active\":\"styles_active__2MBpI\",\"contentContainer\":\"styles_contentContainer__20cp_\",\"appContainer\":\"styles_appContainer__iUHdK\"};"],"sourceRoot":""}